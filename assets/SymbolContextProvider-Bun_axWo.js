var Be=t=>{throw TypeError(t)};var be=(t,e,s)=>e.has(t)||Be("Cannot "+s);var i=(t,e,s)=>(be(t,e,"read from private field"),s?s.call(t):e.get(t)),d=(t,e,s)=>e.has(t)?Be("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),h=(t,e,s,r)=>(be(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),R=(t,e,s)=>(be(t,e,"access private method"),s);import{r as w,j as Ze}from"./index-B-mEWGJ4.js";var Pe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},J=typeof window>"u"||"Deno"in globalThis;function Se(){}function Wt(t,e){return typeof t=="function"?t(e):t}function ge(t){return typeof t=="number"&&t>=0&&t!==1/0}function Xe(t,e){return Math.max(t+(e||0)-Date.now(),0)}function me(t,e){return typeof t=="function"?t(e):t}function M(t,e){return typeof t=="function"?t(e):t}function Nt(t,e){const{type:s="all",exact:r,fetchStatus:n,predicate:a,queryKey:u,stale:c}=t;if(u){if(r){if(e.queryHash!==lt(u,e.options))return!1}else if(!Me(e.queryKey,u))return!1}if(s!=="all"){const l=e.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||n&&n!==e.state.fetchStatus||a&&!a(e))}function Yt(t,e){const{exact:s,status:r,predicate:n,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(s){if(Re(e.options.mutationKey)!==Re(a))return!1}else if(!Me(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||n&&!n(e))}function lt(t,e){return((e==null?void 0:e.queryKeyHashFn)||Re)(t)}function Re(t){return JSON.stringify(t,(e,s)=>we(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function Me(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(s=>!Me(t[s],e[s])):!1}function et(t,e){if(t===e)return t;const s=qe(t)&&qe(e);if(s||we(t)&&we(e)){const r=s?t:Object.keys(t),n=r.length,a=s?e:Object.keys(e),u=a.length,c=s?[]:{};let l=0;for(let y=0;y<u;y++){const v=s?y:a[y];(!s&&r.includes(v)||s)&&t[v]===void 0&&e[v]===void 0?(c[v]=void 0,l++):(c[v]=et(t[v],e[v]),c[v]===t[v]&&t[v]!==void 0&&l++)}return n===u&&l===n?t:c}return e}function Ce(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function qe(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function we(t){if(!Ke(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Ke(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ke(t){return Object.prototype.toString.call(t)==="[object Object]"}function ft(t){return new Promise(e=>{setTimeout(e,t)})}function Te(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?et(t,e):e}function Gt(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function Ht(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var tt=Symbol();function dt(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===tt?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var N,B,ee,He,yt=(He=class extends Pe{constructor(){super();d(this,N);d(this,B);d(this,ee);h(this,ee,e=>{if(!J&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,B)||this.setEventListener(i(this,ee))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,B))==null||e.call(this),h(this,B,void 0))}setEventListener(e){var s;h(this,ee,e),(s=i(this,B))==null||s.call(this),h(this,B,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){i(this,N)!==e&&(h(this,N,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof i(this,N)=="boolean"?i(this,N):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},N=new WeakMap,B=new WeakMap,ee=new WeakMap,He),st=new yt,te,q,se,ze,pt=(ze=class extends Pe{constructor(){super();d(this,te,!0);d(this,q);d(this,se);h(this,se,e=>{if(!J&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,q)||this.setEventListener(i(this,se))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,q))==null||e.call(this),h(this,q,void 0))}setEventListener(e){var s;h(this,se,e),(s=i(this,q))==null||s.call(this),h(this,q,e(this.setOnline.bind(this)))}setOnline(e){i(this,te)!==e&&(h(this,te,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return i(this,te)}},te=new WeakMap,q=new WeakMap,se=new WeakMap,ze),rt=new pt;function Ee(){let t,e;const s=new Promise((n,a)=>{t=n,e=a});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},s.reject=n=>{r({status:"rejected",reason:n}),e(n)},s}function mt(t){return Math.min(1e3*2**t,3e4)}function it(t){return(t??"online")==="online"?rt.isOnline():!0}var nt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ve(t){return t instanceof nt}function bt(t){let e=!1,s=0,r=!1,n;const a=Ee(),u=p=>{var m;r||(S(new nt(p)),(m=t.abort)==null||m.call(t))},c=()=>{e=!0},l=()=>{e=!1},y=()=>st.isFocused()&&(t.networkMode==="always"||rt.isOnline())&&t.canRun(),v=()=>it(t.networkMode)&&t.canRun(),o=p=>{var m;r||(r=!0,(m=t.onSuccess)==null||m.call(t,p),n==null||n(),a.resolve(p))},S=p=>{var m;r||(r=!0,(m=t.onError)==null||m.call(t,p),n==null||n(),a.reject(p))},g=()=>new Promise(p=>{var m;n=O=>{(r||y())&&p(O)},(m=t.onPause)==null||m.call(t)}).then(()=>{var p;n=void 0,r||(p=t.onContinue)==null||p.call(t)}),E=()=>{if(r)return;let p;const m=s===0?t.initialPromise:void 0;try{p=m??t.fn()}catch(O){p=Promise.reject(O)}Promise.resolve(p).then(o).catch(O=>{var _;if(r)return;const T=t.retry??(J?0:3),D=t.retryDelay??mt,Q=typeof D=="function"?D(s,O):D,C=T===!0||typeof T=="number"&&s<T||typeof T=="function"&&T(s,O);if(e||!C){S(O);return}s++,(_=t.onFail)==null||_.call(t,s,O),ft(Q).then(()=>y()?void 0:g()).then(()=>{e?S(O):E()})})};return{promise:a,cancel:u,continue:()=>(n==null||n(),a),cancelRetry:c,continueRetry:l,canStart:v,start:()=>(v()?E():g().then(E),a)}}var vt=t=>setTimeout(t,0);function St(){let t=[],e=0,s=c=>{c()},r=c=>{c()},n=vt;const a=c=>{e?t.push(c):n(()=>{s(c)})},u=()=>{const c=t;t=[],c.length&&n(()=>{r(()=>{c.forEach(l=>{s(l)})})})};return{batch:c=>{let l;e++;try{l=c()}finally{e--,e||u()}return l},batchCalls:c=>(...l)=>{a(()=>{c(...l)})},schedule:a,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{n=c}}}var _e=St(),Y,$e,gt=($e=class{constructor(){d(this,Y)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ge(this.gcTime)&&h(this,Y,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(J?1/0:5*60*1e3))}clearGcTimeout(){i(this,Y)&&(clearTimeout(i(this,Y)),h(this,Y,void 0))}},Y=new WeakMap,$e),re,ie,L,G,I,le,H,P,x,Ve,zt=(Ve=class extends gt{constructor(e){super();d(this,P);d(this,re);d(this,ie);d(this,L);d(this,G);d(this,I);d(this,le);d(this,H);h(this,H,!1),h(this,le,e.defaultOptions),this.setOptions(e.options),this.observers=[],h(this,G,e.client),h(this,L,i(this,G).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,h(this,re,Rt(this.options)),this.state=e.state??i(this,re),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=i(this,I))==null?void 0:e.promise}setOptions(e){this.options={...i(this,le),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,L).remove(this)}setData(e,s){const r=Te(this.state.data,e,this.options);return R(this,P,x).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){R(this,P,x).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r,n;const s=(r=i(this,I))==null?void 0:r.promise;return(n=i(this,I))==null||n.cancel(e),s?s.then(Se).catch(Se):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,re))}isActive(){return this.observers.some(e=>M(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Xe(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,I))==null||s.continue()}onOnline(){var s;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,I))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),i(this,L).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(i(this,I)&&(i(this,H)?i(this,I).cancel({revert:!0}):i(this,I).cancelRetry()),this.scheduleGc()),i(this,L).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||R(this,P,x).call(this,{type:"invalidate"})}fetch(e,s){var l,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(i(this,I))return i(this,I).continueRetry(),i(this,I).promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(S=>S.options.queryFn);o&&this.setOptions(o.options)}const r=new AbortController,n=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(h(this,H,!0),r.signal)})},a=()=>{const o=dt(this.options,s),S={client:i(this,G),queryKey:this.queryKey,meta:this.meta};return n(S),h(this,H,!1),this.options.persister?this.options.persister(o,S,this):o(S)},u={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:i(this,G),state:this.state,fetchFn:a};n(u),(l=this.options.behavior)==null||l.onFetch(u,this),h(this,ie,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=u.fetchOptions)==null?void 0:y.meta))&&R(this,P,x).call(this,{type:"fetch",meta:(v=u.fetchOptions)==null?void 0:v.meta});const c=o=>{var S,g,E,p;ve(o)&&o.silent||R(this,P,x).call(this,{type:"error",error:o}),ve(o)||((g=(S=i(this,L).config).onError)==null||g.call(S,o,this),(p=(E=i(this,L).config).onSettled)==null||p.call(E,this.state.data,o,this)),this.scheduleGc()};return h(this,I,bt({initialPromise:s==null?void 0:s.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:o=>{var S,g,E,p;if(o===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(o)}catch(m){c(m);return}(g=(S=i(this,L).config).onSuccess)==null||g.call(S,o,this),(p=(E=i(this,L).config).onSettled)==null||p.call(E,o,this.state.error,this),this.scheduleGc()},onError:c,onFail:(o,S)=>{R(this,P,x).call(this,{type:"failed",failureCount:o,error:S})},onPause:()=>{R(this,P,x).call(this,{type:"pause"})},onContinue:()=>{R(this,P,x).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),i(this,I).start()}},re=new WeakMap,ie=new WeakMap,L=new WeakMap,G=new WeakMap,I=new WeakMap,le=new WeakMap,H=new WeakMap,P=new WeakSet,x=function(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...at(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return ve(n)&&n.revert&&i(this,ie)?{...i(this,ie),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),_e.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),i(this,L).notify({query:this,type:"updated",action:e})})},Ve);function at(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:it(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Rt(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var k,f,fe,A,z,ne,K,j,de,ae,oe,$,V,W,ue,b,ce,Oe,De,Fe,Ie,Ue,Ae,ke,ot,Je,Ct=(Je=class extends Pe{constructor(e,s){super();d(this,b);d(this,k);d(this,f);d(this,fe);d(this,A);d(this,z);d(this,ne);d(this,K);d(this,j);d(this,de);d(this,ae);d(this,oe);d(this,$);d(this,V);d(this,W);d(this,ue,new Set);this.options=s,h(this,k,e),h(this,j,null),h(this,K,Ee()),this.options.experimental_prefetchInRender||i(this,K).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,f).addObserver(this),We(i(this,f),this.options)?R(this,b,ce).call(this):this.updateResult(),R(this,b,Ie).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Le(i(this,f),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Le(i(this,f),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,R(this,b,Ue).call(this),R(this,b,Ae).call(this),i(this,f).removeObserver(this)}setOptions(e){const s=this.options,r=i(this,f);if(this.options=i(this,k).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof M(this.options.enabled,i(this,f))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");R(this,b,ke).call(this),i(this,f).setOptions(this.options),s._defaulted&&!Ce(this.options,s)&&i(this,k).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,f),observer:this});const n=this.hasListeners();n&&Ne(i(this,f),r,this.options,s)&&R(this,b,ce).call(this),this.updateResult(),n&&(i(this,f)!==r||M(this.options.enabled,i(this,f))!==M(s.enabled,i(this,f))||me(this.options.staleTime,i(this,f))!==me(s.staleTime,i(this,f)))&&R(this,b,Oe).call(this);const a=R(this,b,De).call(this);n&&(i(this,f)!==r||M(this.options.enabled,i(this,f))!==M(s.enabled,i(this,f))||a!==i(this,W))&&R(this,b,Fe).call(this,a)}getOptimisticResult(e){const s=i(this,k).getQueryCache().build(i(this,k),e),r=this.createResult(s,e);return Tt(this,r)&&(h(this,A,r),h(this,ne,this.options),h(this,z,i(this,f).state)),r}getCurrentResult(){return i(this,A)}trackResult(e,s){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),s==null||s(n),e[n])})}),r}trackProp(e){i(this,ue).add(e)}getCurrentQuery(){return i(this,f)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,k).defaultQueryOptions(e),r=i(this,k).getQueryCache().build(i(this,k),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return R(this,b,ce).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,A)))}createResult(e,s){var Qe;const r=i(this,f),n=this.options,a=i(this,A),u=i(this,z),c=i(this,ne),y=e!==r?e.state:i(this,fe),{state:v}=e;let o={...v},S=!1,g;if(s._optimisticResults){const U=this.hasListeners(),Z=!U&&We(e,s),X=U&&Ne(e,r,s,n);(Z||X)&&(o={...o,...at(v.data,e.options)}),s._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:E,errorUpdatedAt:p,status:m}=o;if(s.select&&o.data!==void 0)if(a&&o.data===(u==null?void 0:u.data)&&s.select===i(this,de))g=i(this,ae);else try{h(this,de,s.select),g=s.select(o.data),g=Te(a==null?void 0:a.data,g,s),h(this,ae,g),h(this,j,null)}catch(U){h(this,j,U)}else g=o.data;if(s.placeholderData!==void 0&&g===void 0&&m==="pending"){let U;if(a!=null&&a.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData))U=a.data;else if(U=typeof s.placeholderData=="function"?s.placeholderData((Qe=i(this,oe))==null?void 0:Qe.state.data,i(this,oe)):s.placeholderData,s.select&&U!==void 0)try{U=s.select(U),h(this,j,null)}catch(Z){h(this,j,Z)}U!==void 0&&(m="success",g=Te(a==null?void 0:a.data,U,s),S=!0)}i(this,j)&&(E=i(this,j),g=i(this,ae),p=Date.now(),m="error");const O=o.fetchStatus==="fetching",T=m==="pending",D=m==="error",Q=T&&O,C=g!==void 0,F={status:m,fetchStatus:o.fetchStatus,isPending:T,isSuccess:m==="success",isError:D,isInitialLoading:Q,isLoading:Q,data:g,dataUpdatedAt:o.dataUpdatedAt,error:E,errorUpdatedAt:p,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>y.dataUpdateCount||o.errorUpdateCount>y.errorUpdateCount,isFetching:O,isRefetching:O&&!T,isLoadingError:D&&!C,isPaused:o.fetchStatus==="paused",isPlaceholderData:S,isRefetchError:D&&C,isStale:je(e,s),refetch:this.refetch,promise:i(this,K)};if(this.options.experimental_prefetchInRender){const U=ye=>{F.status==="error"?ye.reject(F.error):F.data!==void 0&&ye.resolve(F.data)},Z=()=>{const ye=h(this,K,F.promise=Ee());U(ye)},X=i(this,K);switch(X.status){case"pending":e.queryHash===r.queryHash&&U(X);break;case"fulfilled":(F.status==="error"||F.data!==X.value)&&Z();break;case"rejected":(F.status!=="error"||F.error!==X.reason)&&Z();break}}return F}updateResult(){const e=i(this,A),s=this.createResult(i(this,f),this.options);if(h(this,z,i(this,f).state),h(this,ne,this.options),i(this,z).data!==void 0&&h(this,oe,i(this,f)),Ce(s,e))return;h(this,A,s);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!i(this,ue).size)return!0;const u=new Set(a??i(this,ue));return this.options.throwOnError&&u.add("error"),Object.keys(i(this,A)).some(c=>{const l=c;return i(this,A)[l]!==e[l]&&u.has(l)})};R(this,b,ot).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&R(this,b,Ie).call(this)}},k=new WeakMap,f=new WeakMap,fe=new WeakMap,A=new WeakMap,z=new WeakMap,ne=new WeakMap,K=new WeakMap,j=new WeakMap,de=new WeakMap,ae=new WeakMap,oe=new WeakMap,$=new WeakMap,V=new WeakMap,W=new WeakMap,ue=new WeakMap,b=new WeakSet,ce=function(e){R(this,b,ke).call(this);let s=i(this,f).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Se)),s},Oe=function(){R(this,b,Ue).call(this);const e=me(this.options.staleTime,i(this,f));if(J||i(this,A).isStale||!ge(e))return;const r=Xe(i(this,A).dataUpdatedAt,e)+1;h(this,$,setTimeout(()=>{i(this,A).isStale||this.updateResult()},r))},De=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,f)):this.options.refetchInterval)??!1},Fe=function(e){R(this,b,Ae).call(this),h(this,W,e),!(J||M(this.options.enabled,i(this,f))===!1||!ge(i(this,W))||i(this,W)===0)&&h(this,V,setInterval(()=>{(this.options.refetchIntervalInBackground||st.isFocused())&&R(this,b,ce).call(this)},i(this,W)))},Ie=function(){R(this,b,Oe).call(this),R(this,b,Fe).call(this,R(this,b,De).call(this))},Ue=function(){i(this,$)&&(clearTimeout(i(this,$)),h(this,$,void 0))},Ae=function(){i(this,V)&&(clearInterval(i(this,V)),h(this,V,void 0))},ke=function(){const e=i(this,k).getQueryCache().build(i(this,k),this.options);if(e===i(this,f))return;const s=i(this,f);h(this,f,e),h(this,fe,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},ot=function(e){_e.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,A))}),i(this,k).getQueryCache().notify({query:i(this,f),type:"observerResultsUpdated"})})},Je);function wt(t,e){return M(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function We(t,e){return wt(t,e)||t.state.data!==void 0&&Le(t,e,e.refetchOnMount)}function Le(t,e,s){if(M(e.enabled,t)!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&je(t,e)}return!1}function Ne(t,e,s,r){return(t!==e||M(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&je(t,s)}function je(t,e){return M(e.enabled,t)!==!1&&t.isStaleByTime(me(e.staleTime,t))}function Tt(t,e){return!Ce(t.getCurrentResult(),e)}var ut=w.createContext(void 0),xe=t=>{const e=w.useContext(ut);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},$t=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Ze.jsx(ut.Provider,{value:t,children:e})),ct=w.createContext(!1),Et=()=>w.useContext(ct);ct.Provider;function Ot(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Dt=w.createContext(Ot()),Ft=()=>w.useContext(Dt);function It(t,e){return typeof t=="function"?t(...e):!!t}function Ye(){}var Ut=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},At=t=>{w.useEffect(()=>{t.clearReset()},[t])},kt=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:n})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(n&&t.data===void 0||It(s,[t.error,r])),Lt=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Pt=(t,e)=>t.isLoading&&t.isFetching&&!e,Mt=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ge=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function _t(t,e,s){var o,S,g,E,p;const r=xe(),n=Et(),a=Ft(),u=r.defaultQueryOptions(t);(S=(o=r.getDefaultOptions().queries)==null?void 0:o._experimental_beforeQuery)==null||S.call(o,u),u._optimisticResults=n?"isRestoring":"optimistic",Lt(u),Ut(u,a),At(a);const c=!r.getQueryCache().get(u.queryHash),[l]=w.useState(()=>new e(r,u)),y=l.getOptimisticResult(u),v=!n&&t.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(m=>{const O=v?l.subscribe(_e.batchCalls(m)):Ye;return l.updateResult(),O},[l,v]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),w.useEffect(()=>{l.setOptions(u)},[u,l]),Mt(u,y))throw Ge(u,l,a);if(kt({result:y,errorResetBoundary:a,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw y.error;if((E=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||E.call(g,u,y),u.experimental_prefetchInRender&&!J&&Pt(y,n)){const m=c?Ge(u,l,a):(p=r.getQueryCache().get(u.queryHash))==null?void 0:p.promise;m==null||m.catch(Ye).finally(()=>{l.updateResult()})}return u.notifyOnChangeProps?y:l.trackResult(y)}function jt(t,e){return _t(t,Ct)}var he=(t=>(t.UPBIT_SYMBOL_LIST="UPBIT_SYMBOL_LIST",t.UPBIT_SYMBOL_TRADE_DATA="UPBIT_SYMBOL_TRADE_DATA",t.UPBIT_SYMBOLS_RESTAPI_TRADE_DATA="UPBIT_SYMBOLS_RESTAPI_TRADE_DATA",t.BINANCE_SYMBOLS_DATA="BINANCE_SYMBOLS_DATA",t))(he||{});function Vt(t){return new Date(t).toLocaleTimeString("ko-KR",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}async function Jt(){const t=await fetch("https://open.er-api.com/v6/latest/USD");if(!t.ok)throw new Error("환율 데이터를 불러오는 데 실패했습니다.");return(await t.json()).rates.KRW}function xt(t){if(!t)return"other";const e=t.trim().charAt(0);return/[\uAC00-\uD7A3]/.test(e)?"korean":/[a-zA-Z]/.test(e)?"english":"other"}function Qt(t){const e=t.match(/^(.+)\((.+)\)$/);return e?[e[1],e[2]]:[t]}function Zt(t,e,s){const r=xt(t),n=t.toLowerCase();if(r==="english"&&s.includes(t.toUpperCase()))return t;for(let a=0;a<e.length;a++){const{korean_name:u,english_name:c,market:l}=e[a],y=c.toLowerCase(),v=l.replace("KRW-","").toLowerCase();if(r==="korean"){if(Qt(u).map(S=>S.toLowerCase()).includes(n))return v}else if(r==="english"&&(y===n||v===n))return v}return""}function pe(t){return typeof SharedWorker<"u"&&t instanceof SharedWorker}function Xt(t,e){const s=new Map;return e.forEach(n=>{s.set(n.market.replace("KRW-",""),n.korean_name)}),s.get(t.replace("USDT",""))}function es(t,e,s){const r=new Date(t);switch(e){case"seconds":r.setSeconds(r.getSeconds()-s);break;case"minutes":r.setMinutes(r.getMinutes()-s);break;case"days":r.setDate(r.getDate()-s);break;case"weeks":r.setDate(r.getDate()-s*7);break;case"months":r.setMonth(r.getMonth()-s);break;case"years":r.setFullYear(r.getFullYear()-s);break;default:throw new Error(`Invalid candle type: ${e}`)}return r.getTime()}function ts(t,e){return t===0?"0":t>=1e3?Number.parseFloat(t.toPrecision(e)).toLocaleString():Number.parseFloat(t.toPrecision(e)).toString()}const ss=t=>jt({queryKey:["symbol",t],queryFn:async()=>null,initialData:null,staleTime:1/0}),Bt=t=>{const e=xe(),s=t.map(n=>n.replace("USDT","")).join(",");return w.useEffect(()=>{(async()=>{if(t.length===0)return;const a=[],c=await(await fetch(`https://proxy-server-flax-rho.vercel.app/api/proxy?icon=${s}`)).json();a.push(...c);const l=new Map;a.forEach(y=>{l.set(y.symbol,y.image),e.setQueryData(["symbolImage",y.symbol.toLowerCase()],y.image)}),e.setQueryData(["symbolImages"],l)})()},[t,e]),{data:e.getQueryData(["symbolImages"])||new Map}},ht=w.createContext(null),rs=()=>{const t=w.useContext(ht);if(!t)throw new Error("useCount must be used within a CountProvider");return t},is=({children:t})=>{const[e,s]=w.useState("ADAUSDT"),[r,n]=w.useState([]),[a,u]=w.useState(null),[c,l]=w.useState(null),[y,v]=w.useState([]),o=xe(),S=w.useRef(!1),g=w.useRef(!1);return Bt(r),w.useEffect(()=>{const E=Q=>{const C=Q.data;(C==null?void 0:C.type)===he.BINANCE_SYMBOLS_DATA&&(Object.entries(C.data).forEach(([_,F])=>{o.setQueryData(["symbol",_],F)}),S.current===!1&&Object.keys(C.data).length>0&&(n(Object.keys(C.data)),S.current=!0))},p=Q=>{const C=Q.data;(C==null?void 0:C.type)===he.UPBIT_SYMBOL_TRADE_DATA?Object.entries(C.data).forEach(([_,F])=>{o.setQueryData(["symbol",_],F)}):(C==null?void 0:C.type)===he.UPBIT_SYMBOLS_RESTAPI_TRADE_DATA?Object.entries(C.data).forEach(([_,F])=>{o.setQueryData(["symbol",_],F)}):(C==null?void 0:C.type)===he.UPBIT_SYMBOL_LIST&&g.current===!1&&(v([...C.data]),g.current=!0)},m=()=>typeof SharedWorker<"u"?new SharedWorker(new URL("/hy_toy/assets/BinanceSharedWorker-DC6GdPTm.js",import.meta.url),{type:"module"}):new Worker(new URL("/hy_toy/assets/BinanceWorker-DsO0NNw8.js",import.meta.url),{type:"module"}),O=()=>typeof SharedWorker<"u"?new SharedWorker(new URL("/hy_toy/assets/UpbitSharedWorker-B-dR6IMn.js",import.meta.url),{type:"module"}):new Worker(new URL("/hy_toy/assets/UpbitWorker-Dd4EVjbn.js",import.meta.url),{type:"module"}),T=m(),D=O();return D&&(pe(D)?D.port.onmessage=p:D.onmessage=p),T&&(pe(T)?T.port.onmessage=E:T.onmessage=E),u(T),l(D),()=>{T&&(pe(T)?T.port.close():T.terminate()),D&&(pe(D)?D.port.close():D.terminate())}},[]),!a||!c?null:Ze.jsx(ht,{value:{symbol:e,setSymbol:s,symbolList:r,setSymbolList:n,upbitSymbolList:y,setUpbitSymbolList:v,worker:a,upbitWorker:c},children:t})};export{es as A,zt as Q,gt as R,Pe as S,Yt as a,Se as b,bt as c,Ht as d,dt as e,Gt as f,st as g,lt as h,Wt as i,Re as j,$t as k,is as l,Nt as m,_e as n,rt as o,Me as p,ss as q,me as r,tt as s,jt as t,rs as u,Jt as v,Xt as w,Zt as x,Vt as y,ts as z};
