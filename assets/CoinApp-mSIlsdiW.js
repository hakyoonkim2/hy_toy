import{r as h,u as N,j as e,l as k,L as C}from"./index-CtUXUZZF.js";import{u as E,a as I,b as W,C as P,s as w,c as T,d as K}from"./CoinChartView-DtQAv3d3.js";import{u as b,q as $,t as D}from"./SymbolContextProvider-AjEC-A_K.js";const R="_priceItem_ewrs6_1",M="_symbolListLabel_ewrs6_17",O="_priceWrpper_ewrs6_24",q="_price_ewrs6_1",U="_krwPrice_ewrs6_36",A="_pricehighlight_ewrs6_47",J="_priceTitle_ewrs6_59",V="_priceKoreanLabel_ewrs6_66",i={priceItem:R,symbolListLabel:M,priceWrpper:O,price:q,krwPrice:U,pricehighlight:A,priceTitle:J,priceKoreanLabel:V},G=t=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"#FFEB3B",stroke:"#FFEB3B",strokeWidth:1.5,strokeLinejoin:"round",...t},h.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),Q=t=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"#999",strokeWidth:1.5,strokeLinejoin:"round",...t},h.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),F="coinBookmarks",f=()=>{const t=localStorage.getItem(F);try{return t?JSON.parse(t):[]}catch(o){return console.error("Invalid JSON in localStorage:",o),[]}},_=t=>{localStorage.setItem(F,JSON.stringify(t))},x={get:f,has:t=>f().includes(t),add:t=>{const o=f();o.includes(t)||_([...o,t])},remove:t=>{const n=f().filter(d=>d!==t);_(n)},toggle(t){this.has(t)?this.remove(t):this.add(t)}},Y=({symbol:t,toggleBookmark:o,koreanSymbol:n})=>{const{setSymbol:d}=b(),{data:r}=E(t),{data:a}=I(t),p=h.useRef(null),c=N(),u=x.has(t),{data:l}=W({queryKey:["exchange-rate","USD-KRW"],queryFn:$,refetchInterval:1e3*60*10,staleTime:1e3*60*10,gcTime:1e3*60*60,refetchOnWindowFocus:!1}),L=()=>{d(t),k.isMobile&&c("/coin/chartview")},s=(r==null?void 0:r.price)??0,v=(r==null?void 0:r.openPrice)??1,y=s===0?0:((s-v)/v*100).toFixed(2),j=(r==null?void 0:r.color)??"#FFFFFF",B=!!(a&&l&&s&&a.price/l-s>0);h.useEffect(()=>{let m=null;if(p.current){const g=p.current;g.classList.add(i.pricehighlight),m=setTimeout(()=>{g.classList.remove(i.pricehighlight)},300)}return()=>{m&&(clearTimeout(m),m=null)}},[r]);const S=m=>{m.stopPropagation(),o(t),x.has(t)&&requestAnimationFrame(()=>{const g=document.getElementById(`${t}-pricelist`);g==null||g.scrollIntoView({behavior:"smooth",block:"nearest"})})};return e.jsxs("div",{id:`${t}-pricelist`,className:i.priceItem,onClick:L,children:[e.jsxs("div",{className:i.priceTitle,children:[e.jsxs("div",{style:{alignItems:"center",display:"flex"},children:[e.jsx(P,{symbol:t}),e.jsx("strong",{className:i.symbolListLabel,children:t.replace("USDT","")}),n&&e.jsx("strong",{className:i.priceKoreanLabel,children:`${n}`})]}),u?e.jsx(G,{width:20,height:20,onClick:S}):e.jsx(Q,{width:20,height:20,onClick:S})]}),e.jsxs("div",{className:i.priceWrpper,children:[e.jsxs("div",{children:[e.jsx("strong",{ref:p,className:i.price,style:{color:j},children:`${s.toLocaleString()}`}),e.jsx("strong",{className:i.price,style:{color:j,marginLeft:"10px"},children:`${y}% `}),e.jsx("strong",{className:i.price,style:{marginLeft:"10px"},children:"USD"})]}),s&&a&&l?e.jsxs("div",{className:i.krwPrice,children:[e.jsx("strong",{children:"김프:  "}),e.jsx("strong",{style:{color:B?"#f75467":"#4386f9"},children:`${((a.price/l-s)/s*100).toFixed(2)}% `}),e.jsx("strong",{style:{marginLeft:"10px"},children:"KRW:  "}),e.jsx("strong",{style:{color:j},children:`${a.price.toLocaleString()}`})]}):e.jsx(e.Fragment,{})]})]})},z=()=>{const{symbolList:t,upbitSymbolList:o}=b(),[n,d]=h.useState(x.get()),r=c=>{x.toggle(c),d(x.get())},a=()=>{const c=new Set(n),u=[],l=[];for(const s of t)c.has(s)?u.push(s):l.push(s);return[...n.filter(s=>u.includes(s)),...l]},p=n.length===0?t:a();return e.jsx(e.Fragment,{children:p.length>0?p.map(c=>e.jsx(Y,{symbol:c,koreanSymbol:D(c,o),toggleBookmark:r},c)):e.jsx(C,{})})},ee=()=>e.jsxs("div",{className:w.app,style:k.isMobile?{flexDirection:"column"}:{},children:[k.isMobile?e.jsx("div",{className:w.mobildSearchWrapper,children:e.jsx(T,{})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:w.listContainer,style:{minWidth:k.isMobile?"100%":"300px"},children:e.jsx(z,{})}),k.isMobile?e.jsx(e.Fragment,{}):e.jsx(K,{})]});export{ee as default};
