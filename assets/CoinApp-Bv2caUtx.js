import{r as p,u as C,j as t,l as u,L as E}from"./index-ncfzbiP4.js";import{u as y,a as W,s as L,C as I,b as T}from"./CoinChartView-pVRL2hg9.js";import{u as _,q as K,t as P}from"./SymbolContextProvider-CN4K-XbE.js";const F="coinBookmarks",f=()=>{const e=localStorage.getItem(F);try{return e?JSON.parse(e):[]}catch(i){return console.error("Invalid JSON in localStorage:",i),[]}},w=e=>{localStorage.setItem(F,JSON.stringify(e))},k={get:f,has:e=>f().includes(e),add:e=>{const i=f();i.includes(e)||w([...i,e])},remove:e=>{const c=f().filter(g=>g!==e);w(c)},toggle(e){this.has(e)?this.remove(e):this.add(e)}},D="_priceItem_pd5e4_1",$="_symbolListLabel_pd5e4_17",R="_priceWrpper_pd5e4_23",q="_price_pd5e4_1",M="_krwPrice_pd5e4_35",O="_pricehighlight_pd5e4_46",U="_priceTitle_pd5e4_58",A="_priceKoreanLabel_pd5e4_65",o={priceItem:D,symbolListLabel:$,priceWrpper:R,price:q,krwPrice:M,pricehighlight:O,priceTitle:U,priceKoreanLabel:A},J=e=>{const i=e.replace("USDT","");return y({queryKey:["symbol",`KRW-${i}`],queryFn:async()=>null,initialData:null,staleTime:1/0})},V=e=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"#FFEB3B",stroke:"#FFEB3B",strokeWidth:1.5,strokeLinejoin:"round",...e},p.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),G=e=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"#999",strokeWidth:1.5,strokeLinejoin:"round",...e},p.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),Q=({symbol:e,toggleBookmark:i,koreanSymbol:c})=>{const{setSymbol:g}=_(),{data:r}=W(e),{data:a}=J(e),h=p.useRef(null),n=C(),x=k.has(e),{data:l}=y({queryKey:["exchange-rate","USD-KRW"],queryFn:K,refetchInterval:1e3*60*10,staleTime:1e3*60*10,gcTime:1e3*60*60,refetchOnWindowFocus:!1}),S=()=>{g(e),u.isMobile&&n("/coin/chartview")},s=(r==null?void 0:r.price)??0,b=(r==null?void 0:r.openPrice)??1,B=s===0?0:((s-b)/b*100).toFixed(2),j=(r==null?void 0:r.color)??"#FFFFFF",N=!!(a&&l&&s&&a.price/l-s>0);p.useEffect(()=>{let d=null;if(h.current){const m=h.current;m.classList.add(o.pricehighlight),d=setTimeout(()=>{m.classList.remove(o.pricehighlight)},300)}return()=>{d&&(clearTimeout(d),d=null)}},[r]);const v=d=>{d.stopPropagation(),i(e),k.has(e)&&requestAnimationFrame(()=>{const m=document.getElementById(`${e}-pricelist`);m==null||m.scrollIntoView({behavior:"smooth",block:"nearest"})})};return t.jsxs("div",{id:`${e}-pricelist`,className:o.priceItem,onClick:S,children:[t.jsxs("div",{className:o.priceTitle,children:[t.jsxs("div",{children:[t.jsx("strong",{className:o.symbolListLabel,children:e.replace("USDT","")}),c&&t.jsx("strong",{className:o.priceKoreanLabel,children:`${c}`})]}),x?t.jsx(V,{width:20,height:20,onClick:v}):t.jsx(G,{width:20,height:20,onClick:v})]}),t.jsxs("div",{className:o.priceWrpper,children:[t.jsxs("div",{children:[t.jsx("strong",{ref:h,className:o.price,style:{color:j},children:`${s}`}),t.jsx("strong",{className:o.price,style:{color:j,marginLeft:"10px"},children:`${B}% `}),t.jsx("strong",{className:o.price,style:{marginLeft:"10px"},children:"USD"})]}),s&&a&&l?t.jsxs("div",{className:o.krwPrice,children:[t.jsx("strong",{children:"김프:  "}),t.jsx("strong",{style:{color:N?"#f75467":"#4386f9"},children:`${((a.price/l-s)/s*100).toFixed(2)}% `}),t.jsx("strong",{style:{marginLeft:"10px"},children:"KRW:  "}),t.jsx("strong",{style:{color:j},children:`${a.price.toLocaleString()}`})]}):t.jsx(t.Fragment,{})]})]})},Y=()=>{const{symbolList:e,upbitSymbolList:i}=_(),[c,g]=p.useState(k.get()),r=n=>{k.toggle(n),g(k.get())},a=()=>{const n=new Set(c),x=[],l=[];for(const s of e)n.has(s)?x.push(s):l.push(s);return[...c.filter(s=>x.includes(s)),...l]},h=c.length===0?e:a();return t.jsx(t.Fragment,{children:h.length>0?h.map(n=>t.jsx(Q,{symbol:n,koreanSymbol:P(n,i),toggleBookmark:r},n)):t.jsx(E,{})})},Z=()=>t.jsxs("div",{className:L.app,style:u.isMobile?{flexDirection:"column"}:{},children:[u.isMobile?t.jsx("div",{className:L.mobildSearchWrapper,children:t.jsx(I,{})}):t.jsx(t.Fragment,{}),t.jsx("div",{className:L.listContainer,style:{minWidth:u.isMobile?"100%":"300px"},children:t.jsx(Y,{})}),u.isMobile?t.jsx(t.Fragment,{}):t.jsx(T,{})]});export{Z as default};
