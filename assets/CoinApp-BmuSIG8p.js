import{r as h,a as N,j as e,l as k,L as C}from"./index-wbhEPKgy.js";import{u as E,C as I,s as w,a as W,b as P}from"./CoinChartView-D1_FiXSo.js";import{v as b,w as T,x as K,y as $,z as D}from"./SymbolContextProvider-BCHHR-yy.js";const R="_priceItem_ewrs6_1",M="_symbolListLabel_ewrs6_17",O="_priceWrpper_ewrs6_24",U="_price_ewrs6_1",q="_krwPrice_ewrs6_36",A="_pricehighlight_ewrs6_47",J="_priceTitle_ewrs6_59",V="_priceKoreanLabel_ewrs6_66",i={priceItem:R,symbolListLabel:M,priceWrpper:O,price:U,krwPrice:q,pricehighlight:A,priceTitle:J,priceKoreanLabel:V},z=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"#FFEB3B",stroke:"#FFEB3B",strokeWidth:1.5,strokeLinejoin:"round",...s},h.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),G=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"#999",strokeWidth:1.5,strokeLinejoin:"round",...s},h.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),y="coinBookmarks",f=()=>{const s=localStorage.getItem(y);try{return s?JSON.parse(s):[]}catch(o){return console.error("Invalid JSON in localStorage:",o),[]}},_=s=>{localStorage.setItem(y,JSON.stringify(s))},x={get:f,has:s=>f().includes(s),add:s=>{const o=f();o.includes(s)||_([...o,s])},remove:s=>{const n=f().filter(d=>d!==s);_(n)},toggle(s){this.has(s)?this.remove(s):this.add(s)}},Q=({symbol:s,toggleBookmark:o,koreanSymbol:n})=>{const{setSymbol:d}=b(),{data:r}=T(s),{data:a}=E(s),p=h.useRef(null),c=N(),u=x.has(s),{data:l}=K({queryKey:["exchange-rate","USD-KRW"],queryFn:$,refetchInterval:1e3*60*10,staleTime:1e3*60*10,gcTime:1e3*60*60,refetchOnWindowFocus:!1}),L=()=>{d(s),k.isMobile&&c("/coin/chartview")},t=(r==null?void 0:r.price)??0,v=(r==null?void 0:r.openPrice)??1,F=t===0?0:((t-v)/v*100).toFixed(2),j=(r==null?void 0:r.color)??"#FFFFFF",B=!!(a&&l&&t&&a.price/l-t>0);h.useEffect(()=>{let m=null;if(p.current){const g=p.current;g.classList.add(i.pricehighlight),m=setTimeout(()=>{g.classList.remove(i.pricehighlight)},300)}return()=>{m&&(clearTimeout(m),m=null)}},[r]);const S=m=>{m.stopPropagation(),o(s),x.has(s)&&requestAnimationFrame(()=>{const g=document.getElementById(`${s}-pricelist`);g==null||g.scrollIntoView({behavior:"smooth",block:"nearest"})})};return e.jsxs("div",{id:`${s}-pricelist`,className:i.priceItem,onClick:L,children:[e.jsxs("div",{className:i.priceTitle,children:[e.jsxs("div",{style:{alignItems:"center",display:"flex"},children:[e.jsx(I,{symbol:s}),e.jsx("strong",{className:i.symbolListLabel,children:s.replace("USDT","")}),n&&e.jsx("strong",{className:i.priceKoreanLabel,children:`${n}`})]}),u?e.jsx(z,{width:20,height:20,onClick:S}):e.jsx(G,{width:20,height:20,onClick:S})]}),e.jsxs("div",{className:i.priceWrpper,children:[e.jsxs("div",{children:[e.jsx("strong",{ref:p,className:i.price,style:{color:j},children:`${t.toLocaleString()}`}),e.jsx("strong",{className:i.price,style:{color:j,marginLeft:"10px"},children:`${F}% `}),e.jsx("strong",{className:i.price,style:{marginLeft:"10px"},children:"USD"})]}),t&&a&&a.price&&l?e.jsxs("div",{className:i.krwPrice,children:[e.jsx("strong",{children:"김프:  "}),e.jsx("strong",{style:{color:B?"#f75467":"#4386f9"},children:`${((a.price/l-t)/t*100).toFixed(2)}% `}),e.jsx("strong",{style:{marginLeft:"10px"},children:"KRW:  "}),e.jsx("strong",{style:{color:j},children:`${a.price.toLocaleString()}`})]}):e.jsx(e.Fragment,{})]})]})},Y=()=>{const{symbolList:s,upbitSymbolList:o}=b(),[n,d]=h.useState(x.get()),r=c=>{x.toggle(c),d(x.get())},a=()=>{const c=new Set(n),u=[],l=[];for(const t of s)c.has(t)?u.push(t):l.push(t);return[...n.filter(t=>u.includes(t)),...l]},p=n.length===0?s:a();return e.jsx(e.Fragment,{children:p.length>0?p.map(c=>e.jsx(Q,{symbol:c,koreanSymbol:D(c,o),toggleBookmark:r},c)):e.jsx(C,{})})},ee=()=>e.jsxs("div",{className:w.app,style:k.isMobile?{flexDirection:"column"}:{},children:[k.isMobile?e.jsx("div",{className:w.mobildSearchWrapper,children:e.jsx(W,{})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:w.listContainer,style:{minWidth:k.isMobile?"100%":"300px"},children:e.jsx(Y,{})}),k.isMobile?e.jsx(e.Fragment,{}):e.jsx(P,{})]});export{ee as default};
