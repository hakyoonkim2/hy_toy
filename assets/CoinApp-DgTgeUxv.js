import{r as a,u as N,j as t,l as d,L as C}from"./index-Zp23Kct8.js";import{u as F,a as E,s as j,C as W,b as I}from"./CoinChartView-COTHaYcI.js";import{u as L,q as T}from"./SymbolContextProvider-DN1_d99j.js";const _="coinBookmarks",x=()=>{const e=localStorage.getItem(_);try{return e?JSON.parse(e):[]}catch(o){return console.error("Invalid JSON in localStorage:",o),[]}},S=e=>{localStorage.setItem(_,JSON.stringify(e))},u={get:x,has:e=>x().includes(e),add:e=>{const o=x();o.includes(e)||S([...o,e])},remove:e=>{const g=x().filter(s=>s!==e);S(g)},toggle(e){this.has(e)?this.remove(e):this.add(e)}},P="_priceItem_yc71o_1",D="_symbolListLabel_yc71o_17",R="_priceWrpper_yc71o_23",$="_price_yc71o_1",q="_krwPrice_yc71o_35",K="_pricehighlight_yc71o_46",M="_priceTitle_yc71o_58",i={priceItem:P,symbolListLabel:D,priceWrpper:R,price:$,krwPrice:q,pricehighlight:K,priceTitle:M},O=e=>{const o=e.replace("USDT","");return F({queryKey:["symbol",`KRW-${o}`],queryFn:async()=>null,initialData:null,staleTime:1/0})},U=e=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"#FFEB3B",stroke:"#FFEB3B",strokeWidth:1.5,strokeLinejoin:"round",...e},a.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),A=e=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"#999",strokeWidth:1.5,strokeLinejoin:"round",...e},a.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),J=({symbol:e,toggleBookmark:o})=>{const{setSymbol:g}=L(),{data:s}=E(e),{data:n}=O(e),h=a.useRef(null),c=N(),k=u.has(e),{data:l}=F({queryKey:["exchange-rate","USD-KRW"],queryFn:T,refetchInterval:1e3*60*10,staleTime:1e3*60*10,gcTime:1e3*60*60,refetchOnWindowFocus:!1}),y=()=>{g(e),d.isMobile&&c("/coin/chartview")},r=(s==null?void 0:s.price)??0,v=(s==null?void 0:s.openPrice)??1,b=r===0?0:((r-v)/v*100).toFixed(2),f=(s==null?void 0:s.color)??"#FFFFFF",B=!!(n&&l&&r&&n.price/l-r>0);a.useEffect(()=>{let p=null;if(h.current){const m=h.current;m.classList.add(i.pricehighlight),p=setTimeout(()=>{m.classList.remove(i.pricehighlight)},300)}return()=>{p&&(clearTimeout(p),p=null)}},[s]);const w=p=>{p.stopPropagation(),o(e),u.has(e)&&requestAnimationFrame(()=>{const m=document.getElementById(`${e}-pricelist`);m==null||m.scrollIntoView({behavior:"smooth",block:"nearest"})})};return t.jsxs("div",{id:`${e}-pricelist`,className:i.priceItem,onClick:y,children:[t.jsxs("div",{className:i.priceTitle,children:[t.jsx("strong",{className:i.symbolListLabel,children:e.replace("USDT","")}),k?t.jsx(U,{width:20,height:20,onClick:w}):t.jsx(A,{width:20,height:20,onClick:w})]}),t.jsxs("div",{className:i.priceWrpper,children:[t.jsxs("div",{children:[t.jsx("strong",{ref:h,className:i.price,style:{color:f},children:`${r}`}),t.jsx("strong",{className:i.price,style:{color:f,marginLeft:"10px"},children:`${b}% `}),t.jsx("strong",{className:i.price,style:{marginLeft:"10px"},children:"USD"})]}),r&&n&&l?t.jsxs("div",{className:i.krwPrice,children:[t.jsx("strong",{children:"김프: "}),t.jsx("strong",{style:{color:B?"#f75467":"#4386f9"},children:`${((n.price/l-r)/r*100).toFixed(2)}% `}),t.jsx("strong",{style:{marginLeft:"10px"},children:"KRW: "}),t.jsx("strong",{style:{color:f},children:`${n.price.toLocaleString()}`})]}):t.jsx(t.Fragment,{})]})]})},V=({symbolList:e})=>{const[o,g]=a.useState(u.get()),s=c=>{u.toggle(c),g(u.get())},n=()=>{const c=new Set(o),k=[],l=[];for(const r of e)c.has(r)?k.push(r):l.push(r);return[...o.filter(r=>k.includes(r)),...l]},h=o.length===0?e:n();return t.jsx(t.Fragment,{children:h.length>0?h.map(c=>t.jsx(J,{symbol:c,toggleBookmark:s},c)):t.jsx(C,{})})},z=()=>{const{symbolList:e}=L();return t.jsxs("div",{className:j.app,style:d.isMobile?{flexDirection:"column"}:{},children:[d.isMobile?t.jsx("div",{className:j.mobildSearchWrapper,children:t.jsx(W,{})}):t.jsx(t.Fragment,{}),t.jsx("div",{className:j.listContainer,style:{minWidth:d.isMobile?"100%":"300px"},children:t.jsx(V,{symbolList:e})}),d.isMobile?t.jsx(t.Fragment,{}):t.jsx(I,{})]})};export{z as default};
