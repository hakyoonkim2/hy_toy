import{r as p,u as N,j as e,l as k,L as C}from"./index-VBmHX-Zx.js";import{u as E,a as W,b as I,s as L,C as P,c as T}from"./CoinChartView-CNwdqFp8.js";import{u as _,q as K,t as $}from"./SymbolContextProvider-B2WJ3ohX.js";const F="coinBookmarks",f=()=>{const t=localStorage.getItem(F);try{return t?JSON.parse(t):[]}catch(o){return console.error("Invalid JSON in localStorage:",o),[]}},w=t=>{localStorage.setItem(F,JSON.stringify(t))},u={get:f,has:t=>f().includes(t),add:t=>{const o=f();o.includes(t)||w([...o,t])},remove:t=>{const n=f().filter(g=>g!==t);w(n)},toggle(t){this.has(t)?this.remove(t):this.add(t)}},D="_priceItem_pd5e4_1",R="_symbolListLabel_pd5e4_17",M="_priceWrpper_pd5e4_23",O="_price_pd5e4_1",q="_krwPrice_pd5e4_35",U="_pricehighlight_pd5e4_46",A="_priceTitle_pd5e4_58",J="_priceKoreanLabel_pd5e4_65",i={priceItem:D,symbolListLabel:R,priceWrpper:M,price:O,krwPrice:q,pricehighlight:U,priceTitle:A,priceKoreanLabel:J},V=t=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"#FFEB3B",stroke:"#FFEB3B",strokeWidth:1.5,strokeLinejoin:"round",...t},p.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),G=t=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"#999",strokeWidth:1.5,strokeLinejoin:"round",...t},p.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),Q=({symbol:t,toggleBookmark:o,koreanSymbol:n})=>{const{setSymbol:g}=_(),{data:r}=E(t),{data:a}=W(t),h=p.useRef(null),c=N(),x=u.has(t),{data:l}=I({queryKey:["exchange-rate","USD-KRW"],queryFn:K,refetchInterval:1e3*60*10,staleTime:1e3*60*10,gcTime:1e3*60*60,refetchOnWindowFocus:!1}),v=()=>{g(t),k.isMobile&&c("/coin/chartview")},s=(r==null?void 0:r.price)??0,S=(r==null?void 0:r.openPrice)??1,y=s===0?0:((s-S)/S*100).toFixed(2),j=(r==null?void 0:r.color)??"#FFFFFF",B=!!(a&&l&&s&&a.price/l-s>0);p.useEffect(()=>{let d=null;if(h.current){const m=h.current;m.classList.add(i.pricehighlight),d=setTimeout(()=>{m.classList.remove(i.pricehighlight)},300)}return()=>{d&&(clearTimeout(d),d=null)}},[r]);const b=d=>{d.stopPropagation(),o(t),u.has(t)&&requestAnimationFrame(()=>{const m=document.getElementById(`${t}-pricelist`);m==null||m.scrollIntoView({behavior:"smooth",block:"nearest"})})};return e.jsxs("div",{id:`${t}-pricelist`,className:i.priceItem,onClick:v,children:[e.jsxs("div",{className:i.priceTitle,children:[e.jsxs("div",{children:[e.jsx("strong",{className:i.symbolListLabel,children:t.replace("USDT","")}),n&&e.jsx("strong",{className:i.priceKoreanLabel,children:`${n}`})]}),x?e.jsx(V,{width:20,height:20,onClick:b}):e.jsx(G,{width:20,height:20,onClick:b})]}),e.jsxs("div",{className:i.priceWrpper,children:[e.jsxs("div",{children:[e.jsx("strong",{ref:h,className:i.price,style:{color:j},children:`${s}`}),e.jsx("strong",{className:i.price,style:{color:j,marginLeft:"10px"},children:`${y}% `}),e.jsx("strong",{className:i.price,style:{marginLeft:"10px"},children:"USD"})]}),s&&a&&l?e.jsxs("div",{className:i.krwPrice,children:[e.jsx("strong",{children:"김프:  "}),e.jsx("strong",{style:{color:B?"#f75467":"#4386f9"},children:`${((a.price/l-s)/s*100).toFixed(2)}% `}),e.jsx("strong",{style:{marginLeft:"10px"},children:"KRW:  "}),e.jsx("strong",{style:{color:j},children:`${a.price.toLocaleString()}`})]}):e.jsx(e.Fragment,{})]})]})},Y=()=>{const{symbolList:t,upbitSymbolList:o}=_(),[n,g]=p.useState(u.get()),r=c=>{u.toggle(c),g(u.get())},a=()=>{const c=new Set(n),x=[],l=[];for(const s of t)c.has(s)?x.push(s):l.push(s);return[...n.filter(s=>x.includes(s)),...l]},h=n.length===0?t:a();return e.jsx(e.Fragment,{children:h.length>0?h.map(c=>e.jsx(Q,{symbol:c,koreanSymbol:$(c,o),toggleBookmark:r},c)):e.jsx(C,{})})},Z=()=>e.jsxs("div",{className:L.app,style:k.isMobile?{flexDirection:"column"}:{},children:[k.isMobile?e.jsx("div",{className:L.mobildSearchWrapper,children:e.jsx(P,{})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:L.listContainer,style:{minWidth:k.isMobile?"100%":"300px"},children:e.jsx(Y,{})}),k.isMobile?e.jsx(e.Fragment,{}):e.jsx(T,{})]});export{Z as default};
