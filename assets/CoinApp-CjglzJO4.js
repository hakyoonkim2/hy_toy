import{r as p,u as E,j as e,l as x,L as I}from"./index-BZDH8Qtk.js";import{u as T,a as W,b as P,c as D,s as S,C as K,d as $}from"./CoinChartView-B3wEPdvD.js";import{u as F,q as R,t as U}from"./SymbolContextProvider-DW4uQHL0.js";const O="_priceItem_ewrs6_1",q="_symbolListLabel_ewrs6_17",A="_priceWrpper_ewrs6_24",J="_price_ewrs6_1",M="_krwPrice_ewrs6_36",V="_pricehighlight_ewrs6_47",G="_priceTitle_ewrs6_59",Q="_priceKoreanLabel_ewrs6_66",i={priceItem:O,symbolListLabel:q,priceWrpper:A,price:J,krwPrice:M,pricehighlight:V,priceTitle:G,priceKoreanLabel:Q},Y=t=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"#FFEB3B",stroke:"#FFEB3B",strokeWidth:1.5,strokeLinejoin:"round",...t},p.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),z=t=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"#999",strokeWidth:1.5,strokeLinejoin:"round",...t},p.createElement("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})),y="coinBookmarks",j=()=>{const t=localStorage.getItem(y);try{return t?JSON.parse(t):[]}catch(o){return console.error("Invalid JSON in localStorage:",o),[]}},_=t=>{localStorage.setItem(y,JSON.stringify(t))},u={get:j,has:t=>j().includes(t),add:t=>{const o=j();o.includes(t)||_([...o,t])},remove:t=>{const c=j().filter(d=>d!==t);_(c)},toggle(t){this.has(t)?this.remove(t):this.add(t)}},H=({symbol:t,toggleBookmark:o,koreanSymbol:c})=>{const{setSymbol:d}=F(),{data:s}=T(t),{data:n}=W(),{data:a}=P(t),r=p.useRef(null),w=E(),f=u.has(t),{data:k}=D({queryKey:["exchange-rate","USD-KRW"],queryFn:R,refetchInterval:1e3*60*10,staleTime:1e3*60*10,gcTime:1e3*60*60,refetchOnWindowFocus:!1}),h=()=>{d(t),x.isMobile&&w("/coin/chartview")},l=(s==null?void 0:s.price)??0,v=(s==null?void 0:s.openPrice)??1,B=l===0?0:((l-v)/v*100).toFixed(2),L=(s==null?void 0:s.color)??"#FFFFFF",C=!!(a&&k&&l&&a.price/k-l>0);p.useEffect(()=>{let g=null;if(r.current){const m=r.current;m.classList.add(i.pricehighlight),g=setTimeout(()=>{m.classList.remove(i.pricehighlight)},300)}return()=>{g&&(clearTimeout(g),g=null)}},[s]);const b=g=>{g.stopPropagation(),o(t),u.has(t)&&requestAnimationFrame(()=>{const m=document.getElementById(`${t}-pricelist`);m==null||m.scrollIntoView({behavior:"smooth",block:"nearest"})})},N=n==null?void 0:n.get(t.replace("USDT","").toLowerCase());return e.jsxs("div",{id:`${t}-pricelist`,className:i.priceItem,onClick:h,children:[e.jsxs("div",{className:i.priceTitle,children:[e.jsxs("div",{style:{alignItems:"center",display:"flex"},children:[N?e.jsx("img",{src:n==null?void 0:n.get(t.replace("USDT","").toLowerCase()),alt:"Coin symbol icon",width:15,height:15}):e.jsx(e.Fragment,{}),e.jsx("strong",{className:i.symbolListLabel,children:t.replace("USDT","")}),c&&e.jsx("strong",{className:i.priceKoreanLabel,children:`${c}`})]}),f?e.jsx(Y,{width:20,height:20,onClick:b}):e.jsx(z,{width:20,height:20,onClick:b})]}),e.jsxs("div",{className:i.priceWrpper,children:[e.jsxs("div",{children:[e.jsx("strong",{ref:r,className:i.price,style:{color:L},children:`${l.toLocaleString()}`}),e.jsx("strong",{className:i.price,style:{color:L,marginLeft:"10px"},children:`${B}% `}),e.jsx("strong",{className:i.price,style:{marginLeft:"10px"},children:"USD"})]}),l&&a&&k?e.jsxs("div",{className:i.krwPrice,children:[e.jsx("strong",{children:"김프:  "}),e.jsx("strong",{style:{color:C?"#f75467":"#4386f9"},children:`${((a.price/k-l)/l*100).toFixed(2)}% `}),e.jsx("strong",{style:{marginLeft:"10px"},children:"KRW:  "}),e.jsx("strong",{style:{color:L},children:`${a.price.toLocaleString()}`})]}):e.jsx(e.Fragment,{})]})]})},X=()=>{const{symbolList:t,upbitSymbolList:o}=F(),[c,d]=p.useState(u.get()),s=r=>{u.toggle(r),d(u.get())},n=()=>{const r=new Set(c),w=[],f=[];for(const h of t)r.has(h)?w.push(h):f.push(h);return[...c.filter(h=>w.includes(h)),...f]},a=c.length===0?t:n();return e.jsx(e.Fragment,{children:a.length>0?a.map(r=>e.jsx(H,{symbol:r,koreanSymbol:U(r,o),toggleBookmark:s},r)):e.jsx(I,{})})},se=()=>e.jsxs("div",{className:S.app,style:x.isMobile?{flexDirection:"column"}:{},children:[x.isMobile?e.jsx("div",{className:S.mobildSearchWrapper,children:e.jsx(K,{})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:S.listContainer,style:{minWidth:x.isMobile?"100%":"300px"},children:e.jsx(X,{})}),x.isMobile?e.jsx(e.Fragment,{}):e.jsx($,{})]});export{se as default};
