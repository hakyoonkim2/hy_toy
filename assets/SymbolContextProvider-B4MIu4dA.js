var At=e=>{throw TypeError(e)};var et=(e,t,i)=>t.has(e)||At("Cannot "+i);var d=(e,t,i)=>(et(e,t,"read from private field"),i?i.call(e):t.get(e)),T=(e,t,i)=>t.has(e)?At("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),C=(e,t,i,r)=>(et(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),k=(e,t,i)=>(et(e,t,"access private method"),i);import{R as Mt,w as Ci,d as ge,f as G,g as tt,c as Ue,s as it,b as Pt,e as Ni,h as Ri,i as Ut,r as P,j as Xt}from"./index-87eXVUIL.js";/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var ot=9e15,pe=1e9,at="0123456789abcdef",Ge="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ye="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ut={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:ot,crypto:!1},ei,se,N=!0,Ve="[DecimalError] ",de=Ve+"Invalid argument: ",ti=Ve+"Precision limit exceeded",ii=Ve+"crypto unavailable",ri="[object Decimal]",K=Math.floor,q=Math.pow,Di=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Oi=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Ti=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,ni=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,z=1e7,y=7,Fi=9007199254740991,ki=Ge.length-1,ct=Ye.length-1,p={toStringTag:ri};p.absoluteValue=p.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),v(e)};p.ceil=function(){return v(new this.constructor(this),this.e+1,2)};p.clampedTo=p.clamp=function(e,t){var i,r=this,n=r.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(de+t);return i=r.cmp(e),i<0?e:r.cmp(t)>0?t:new n(r)};p.comparedTo=p.cmp=function(e){var t,i,r,n,s=this,o=s.d,a=(e=new s.constructor(e)).d,c=s.s,u=e.s;if(!o||!a)return!c||!u?NaN:c!==u?c:o===a?0:!o^c<0?1:-1;if(!o[0]||!a[0])return o[0]?c:a[0]?-u:0;if(c!==u)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(r=o.length,n=a.length,t=0,i=r<n?r:n;t<i;++t)if(o[t]!==a[t])return o[t]>a[t]^c<0?1:-1;return r===n?0:r>n^c<0?1:-1};p.cosine=p.cos=function(){var e,t,i=this,r=i.constructor;return i.d?i.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(i.e,i.sd())+y,r.rounding=1,i=Ii(r,ci(r,i)),r.precision=e,r.rounding=t,v(se==2||se==3?i.neg():i,e,t,!0)):new r(1):new r(NaN)};p.cubeRoot=p.cbrt=function(){var e,t,i,r,n,s,o,a,c,u,f=this,l=f.constructor;if(!f.isFinite()||f.isZero())return new l(f);for(N=!1,s=f.s*q(f.s*f,1/3),!s||Math.abs(s)==1/0?(i=j(f.d),e=f.e,(s=(e-i.length+1)%3)&&(i+=s==1||s==-2?"0":"00"),s=q(i,1/3),e=K((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?i="5e"+e:(i=s.toExponential(),i=i.slice(0,i.indexOf("e")+1)+e),r=new l(i),r.s=f.s):r=new l(s.toString()),o=(e=l.precision)+3;;)if(a=r,c=a.times(a).times(a),u=c.plus(f),r=A(u.plus(f).times(a),u.plus(c),o+2,1),j(a.d).slice(0,o)===(i=j(r.d)).slice(0,o))if(i=i.slice(o-3,o+1),i=="9999"||!n&&i=="4999"){if(!n&&(v(a,e+1,0),a.times(a).times(a).eq(f))){r=a;break}o+=4,n=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(v(r,e+1,1),t=!r.times(r).times(r).eq(f));break}return N=!0,v(r,e,l.rounding,t)};p.decimalPlaces=p.dp=function(){var e,t=this.d,i=NaN;if(t){if(e=t.length-1,i=(e-K(this.e/y))*y,e=t[e],e)for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i};p.dividedBy=p.div=function(e){return A(this,new this.constructor(e))};p.dividedToIntegerBy=p.divToInt=function(e){var t=this,i=t.constructor;return v(A(t,new i(e),0,1,1),i.precision,i.rounding)};p.equals=p.eq=function(e){return this.cmp(e)===0};p.floor=function(){return v(new this.constructor(this),this.e+1,3)};p.greaterThan=p.gt=function(e){return this.cmp(e)>0};p.greaterThanOrEqualTo=p.gte=function(e){var t=this.cmp(e);return t==1||t===0};p.hyperbolicCosine=p.cosh=function(){var e,t,i,r,n,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;i=o.precision,r=o.rounding,o.precision=i+Math.max(s.e,s.sd())+4,o.rounding=1,n=s.d.length,n<32?(e=Math.ceil(n/3),t=(1/Je(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=Pe(o,1,s.times(t),new o(1),!0);for(var c,u=e,f=new o(8);u--;)c=s.times(s),s=a.minus(c.times(f.minus(c.times(f))));return v(s,o.precision=i,o.rounding=r,!0)};p.hyperbolicSine=p.sinh=function(){var e,t,i,r,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(t=s.precision,i=s.rounding,s.precision=t+Math.max(n.e,n.sd())+4,s.rounding=1,r=n.d.length,r<3)n=Pe(s,2,n,n,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,n=n.times(1/Je(5,e)),n=Pe(s,2,n,n,!0);for(var o,a=new s(5),c=new s(16),u=new s(20);e--;)o=n.times(n),n=n.times(a.plus(o.times(c.times(o).plus(u))))}return s.precision=t,s.rounding=i,v(n,t,i,!0)};p.hyperbolicTangent=p.tanh=function(){var e,t,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,A(i.sinh(),i.cosh(),r.precision=e,r.rounding=t)):new r(i.s)};p.inverseCosine=p.acos=function(){var e=this,t=e.constructor,i=e.abs().cmp(1),r=t.precision,n=t.rounding;return i!==-1?i===0?e.isNeg()?te(t,r,n):new t(0):new t(NaN):e.isZero()?te(t,r+4,n).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=n,e.times(2))};p.inverseHyperbolicCosine=p.acosh=function(){var e,t,i=this,r=i.constructor;return i.lte(1)?new r(i.eq(1)?0:NaN):i.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(i.e),i.sd())+4,r.rounding=1,N=!1,i=i.times(i).minus(1).sqrt().plus(i),N=!0,r.precision=e,r.rounding=t,i.ln()):new r(i)};p.inverseHyperbolicSine=p.asinh=function(){var e,t,i=this,r=i.constructor;return!i.isFinite()||i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,r.rounding=1,N=!1,i=i.times(i).plus(1).sqrt().plus(i),N=!0,r.precision=e,r.rounding=t,i.ln())};p.inverseHyperbolicTangent=p.atanh=function(){var e,t,i,r,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=s.precision,t=s.rounding,r=n.sd(),Math.max(r,e)<2*-n.e-1?v(new s(n),e,t,!0):(s.precision=i=r-n.e,n=A(n.plus(1),new s(1).minus(n),i+e,1),s.precision=e+4,s.rounding=1,n=n.ln(),s.precision=e,s.rounding=t,n.times(.5))):new s(NaN)};p.inverseSine=p.asin=function(){var e,t,i,r,n=this,s=n.constructor;return n.isZero()?new s(n):(t=n.abs().cmp(1),i=s.precision,r=s.rounding,t!==-1?t===0?(e=te(s,i+4,r).times(.5),e.s=n.s,e):new s(NaN):(s.precision=i+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=i,s.rounding=r,n.times(2)))};p.inverseTangent=p.atan=function(){var e,t,i,r,n,s,o,a,c,u=this,f=u.constructor,l=f.precision,h=f.rounding;if(u.isFinite()){if(u.isZero())return new f(u);if(u.abs().eq(1)&&l+4<=ct)return o=te(f,l+4,h).times(.25),o.s=u.s,o}else{if(!u.s)return new f(NaN);if(l+4<=ct)return o=te(f,l+4,h).times(.5),o.s=u.s,o}for(f.precision=a=l+10,f.rounding=1,i=Math.min(28,a/y+2|0),e=i;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(N=!1,t=Math.ceil(a/y),r=1,c=u.times(u),o=new f(u),n=u;e!==-1;)if(n=n.times(c),s=o.minus(n.div(r+=2)),n=n.times(c),o=s.plus(n.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return i&&(o=o.times(2<<i-1)),N=!0,v(o,f.precision=l,f.rounding=h,!0)};p.isFinite=function(){return!!this.d};p.isInteger=p.isInt=function(){return!!this.d&&K(this.e/y)>this.d.length-2};p.isNaN=function(){return!this.s};p.isNegative=p.isNeg=function(){return this.s<0};p.isPositive=p.isPos=function(){return this.s>0};p.isZero=function(){return!!this.d&&this.d[0]===0};p.lessThan=p.lt=function(e){return this.cmp(e)<0};p.lessThanOrEqualTo=p.lte=function(e){return this.cmp(e)<1};p.logarithm=p.log=function(e){var t,i,r,n,s,o,a,c,u=this,f=u.constructor,l=f.precision,h=f.rounding,m=5;if(e==null)e=new f(10),t=!0;else{if(e=new f(e),i=e.d,e.s<0||!i||!i[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(i=u.d,u.s<0||!i||!i[0]||u.eq(1))return new f(i&&!i[0]?-1/0:u.s!=1?NaN:i?0:1/0);if(t)if(i.length>1)s=!0;else{for(n=i[0];n%10===0;)n/=10;s=n!==1}if(N=!1,a=l+m,o=he(u,a),r=t?$e(f,a+10):he(e,a),c=A(o,r,a,1),qe(c.d,n=l,h))do if(a+=10,o=he(u,a),r=t?$e(f,a+10):he(e,a),c=A(o,r,a,1),!s){+j(c.d).slice(n+1,n+15)+1==1e14&&(c=v(c,l+1,0));break}while(qe(c.d,n+=10,h));return N=!0,v(c,l,h)};p.minus=p.sub=function(e){var t,i,r,n,s,o,a,c,u,f,l,h,m=this,w=m.constructor;if(e=new w(e),!m.d||!e.d)return!m.s||!e.s?e=new w(NaN):m.d?e.s=-e.s:e=new w(e.d||m.s!==e.s?m:NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(u=m.d,h=e.d,a=w.precision,c=w.rounding,!u[0]||!h[0]){if(h[0])e.s=-e.s;else if(u[0])e=new w(m);else return new w(c===3?-0:0);return N?v(e,a,c):e}if(i=K(e.e/y),f=K(m.e/y),u=u.slice(),s=f-i,s){for(l=s<0,l?(t=u,s=-s,o=h.length):(t=h,i=f,o=u.length),r=Math.max(Math.ceil(a/y),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=u.length,o=h.length,l=r<o,l&&(o=r),r=0;r<o;r++)if(u[r]!=h[r]){l=u[r]<h[r];break}s=0}for(l&&(t=u,u=h,h=t,e.s=-e.s),o=u.length,r=h.length-o;r>0;--r)u[o++]=0;for(r=h.length;r>s;){if(u[--r]<h[r]){for(n=r;n&&u[--n]===0;)u[n]=z-1;--u[n],u[r]+=z}u[r]-=h[r]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--i;return u[0]?(e.d=u,e.e=ze(u,i),N?v(e,a,c):e):new w(c===3?-0:0)};p.modulo=p.mod=function(e){var t,i=this,r=i.constructor;return e=new r(e),!i.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||i.d&&!i.d[0]?v(new r(i),r.precision,r.rounding):(N=!1,r.modulo==9?(t=A(i,e.abs(),0,3,1),t.s*=e.s):t=A(i,e,0,r.modulo,1),t=t.times(e),N=!0,i.minus(t))};p.naturalExponential=p.exp=function(){return lt(this)};p.naturalLogarithm=p.ln=function(){return he(this)};p.negated=p.neg=function(){var e=new this.constructor(this);return e.s=-e.s,v(e)};p.plus=p.add=function(e){var t,i,r,n,s,o,a,c,u,f,l=this,h=l.constructor;if(e=new h(e),!l.d||!e.d)return!l.s||!e.s?e=new h(NaN):l.d||(e=new h(e.d||l.s===e.s?l:NaN)),e;if(l.s!=e.s)return e.s=-e.s,l.minus(e);if(u=l.d,f=e.d,a=h.precision,c=h.rounding,!u[0]||!f[0])return f[0]||(e=new h(l)),N?v(e,a,c):e;if(s=K(l.e/y),r=K(e.e/y),u=u.slice(),n=s-r,n){for(n<0?(i=u,n=-n,o=f.length):(i=f,r=s,o=u.length),s=Math.ceil(a/y),o=s>o?s+1:o+1,n>o&&(n=o,i.length=1),i.reverse();n--;)i.push(0);i.reverse()}for(o=u.length,n=f.length,o-n<0&&(n=o,i=f,f=u,u=i),t=0;n;)t=(u[--n]=u[n]+f[n]+t)/z|0,u[n]%=z;for(t&&(u.unshift(t),++r),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=ze(u,r),N?v(e,a,c):e};p.precision=p.sd=function(e){var t,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(de+e);return i.d?(t=si(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t};p.round=function(){var e=this,t=e.constructor;return v(new t(e),e.e+1,t.rounding)};p.sine=p.sin=function(){var e,t,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+Math.max(i.e,i.sd())+y,r.rounding=1,i=Mi(r,ci(r,i)),r.precision=e,r.rounding=t,v(se>2?i.neg():i,e,t,!0)):new r(NaN)};p.squareRoot=p.sqrt=function(){var e,t,i,r,n,s,o=this,a=o.d,c=o.e,u=o.s,f=o.constructor;if(u!==1||!a||!a[0])return new f(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(N=!1,u=Math.sqrt(+o),u==0||u==1/0?(t=j(a),(t.length+c)%2==0&&(t+="0"),u=Math.sqrt(t),c=K((c+1)/2)-(c<0||c%2),u==1/0?t="5e"+c:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),r=new f(t)):r=new f(u.toString()),i=(c=f.precision)+3;;)if(s=r,r=s.plus(A(o,s,i+2,1)).times(.5),j(s.d).slice(0,i)===(t=j(r.d)).slice(0,i))if(t=t.slice(i-3,i+1),t=="9999"||!n&&t=="4999"){if(!n&&(v(s,c+1,0),s.times(s).eq(o))){r=s;break}i+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(v(r,c+1,1),e=!r.times(r).eq(o));break}return N=!0,v(r,c,f.rounding,e)};p.tangent=p.tan=function(){var e,t,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,i=i.sin(),i.s=1,i=A(i,new r(1).minus(i.times(i)).sqrt(),e+10,0),r.precision=e,r.rounding=t,v(se==2||se==4?i.neg():i,e,t,!0)):new r(NaN)};p.times=p.mul=function(e){var t,i,r,n,s,o,a,c,u,f=this,l=f.constructor,h=f.d,m=(e=new l(e)).d;if(e.s*=f.s,!h||!h[0]||!m||!m[0])return new l(!e.s||h&&!h[0]&&!m||m&&!m[0]&&!h?NaN:!h||!m?e.s/0:e.s*0);for(i=K(f.e/y)+K(e.e/y),c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,n=c+r;n>r;)a=s[n]+m[r]*h[n-r-1]+t,s[n--]=a%z|0,t=a/z|0;s[n]=(s[n]+t)%z|0}for(;!s[--o];)s.pop();return t?++i:s.shift(),e.d=s,e.e=ze(s,i),N?v(e,l.precision,l.rounding):e};p.toBinary=function(e,t){return Dt(this,2,e,t)};p.toDecimalPlaces=p.toDP=function(e,t){var i=this,r=i.constructor;return i=new r(i),e===void 0?i:(Z(e,0,pe),t===void 0?t=r.rounding:Z(t,0,8),v(i,e+i.e+1,t))};p.toExponential=function(e,t){var i,r=this,n=r.constructor;return e===void 0?i=ie(r,!0):(Z(e,0,pe),t===void 0?t=n.rounding:Z(t,0,8),r=v(new n(r),e+1,t),i=ie(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+i:i};p.toFixed=function(e,t){var i,r,n=this,s=n.constructor;return e===void 0?i=ie(n):(Z(e,0,pe),t===void 0?t=s.rounding:Z(t,0,8),r=v(new s(n),e+n.e+1,t),i=ie(r,!1,e+r.e+1)),n.isNeg()&&!n.isZero()?"-"+i:i};p.toFraction=function(e){var t,i,r,n,s,o,a,c,u,f,l,h,m=this,w=m.d,g=m.constructor;if(!w)return new g(m);if(u=i=new g(1),r=c=new g(0),t=new g(r),s=t.e=si(w)-m.e-1,o=s%y,t.d[0]=q(10,o<0?y+o:o),e==null)e=s>0?t:u;else{if(a=new g(e),!a.isInt()||a.lt(u))throw Error(de+a);e=a.gt(t)?s>0?t:u:a}for(N=!1,a=new g(j(w)),f=g.precision,g.precision=s=w.length*y*2;l=A(a,t,0,1,1),n=i.plus(l.times(r)),n.cmp(e)!=1;)i=r,r=n,n=u,u=c.plus(l.times(n)),c=n,n=t,t=a.minus(l.times(n)),a=n;return n=A(e.minus(i),r,0,1,1),c=c.plus(n.times(u)),i=i.plus(n.times(r)),c.s=u.s=m.s,h=A(u,r,s,1).minus(m).abs().cmp(A(c,i,s,1).minus(m).abs())<1?[u,r]:[c,i],g.precision=f,N=!0,h};p.toHexadecimal=p.toHex=function(e,t){return Dt(this,16,e,t)};p.toNearest=function(e,t){var i=this,r=i.constructor;if(i=new r(i),e==null){if(!i.d)return i;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Z(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(N=!1,i=A(i,e,0,t,1).times(e),N=!0,v(i)):(e.s=i.s,i=e),i};p.toNumber=function(){return+this};p.toOctal=function(e,t){return Dt(this,8,e,t)};p.toPower=p.pow=function(e){var t,i,r,n,s,o,a=this,c=a.constructor,u=+(e=new c(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new c(q(+a,u));if(a=new c(a),a.eq(1))return a;if(r=c.precision,s=c.rounding,e.eq(1))return v(a,r,s);if(t=K(e.e/y),t>=e.d.length-1&&(i=u<0?-u:u)<=Fi)return n=oi(c,a,i,r),e.s<0?new c(1).div(n):v(n,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return i=q(+a,u),t=i==0||!isFinite(i)?K(u*(Math.log("0."+j(a.d))/Math.LN10+a.e+1)):new c(i+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?o/0:0):(N=!1,c.rounding=a.s=1,i=Math.min(12,(t+"").length),n=lt(e.times(he(a,r+i)),r),n.d&&(n=v(n,r+5,1),qe(n.d,r,s)&&(t=r+10,n=v(lt(e.times(he(a,t+i)),t),t+5,1),+j(n.d).slice(r+1,r+15)+1==1e14&&(n=v(n,r+1,0)))),n.s=o,N=!0,c.rounding=s,v(n,r,s))};p.toPrecision=function(e,t){var i,r=this,n=r.constructor;return e===void 0?i=ie(r,r.e<=n.toExpNeg||r.e>=n.toExpPos):(Z(e,1,pe),t===void 0?t=n.rounding:Z(t,0,8),r=v(new n(r),e,t),i=ie(r,e<=r.e||r.e<=n.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+i:i};p.toSignificantDigits=p.toSD=function(e,t){var i=this,r=i.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Z(e,1,pe),t===void 0?t=r.rounding:Z(t,0,8)),v(new r(i),e,t)};p.toString=function(){var e=this,t=e.constructor,i=ie(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i};p.truncated=p.trunc=function(){return v(new this.constructor(this),this.e+1,1)};p.valueOf=p.toJSON=function(){var e=this,t=e.constructor,i=ie(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};function j(e){var t,i,r,n=e.length-1,s="",o=e[0];if(n>0){for(s+=o,t=1;t<n;t++)r=e[t]+"",i=y-r.length,i&&(s+=ae(i)),s+=r;o=e[t],r=o+"",i=y-r.length,i&&(s+=ae(i))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Z(e,t,i){if(e!==~~e||e<t||e>i)throw Error(de+e)}function qe(e,t,i,r){var n,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=y,n=0):(n=Math.ceil((t+1)/y),t%=y),s=q(10,y-t),a=e[n]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=i<4&&a==99999||i>3&&a==49999||a==5e4||a==0):o=(i<4&&a+1==s||i>3&&a+1==s/2)&&(e[n+1]/s/100|0)==q(10,t-2)-1||(a==s/2||a==0)&&(e[n+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||i<4)&&a==9999||!r&&i>3&&a==4999):o=((r||i<4)&&a+1==s||!r&&i>3&&a+1==s/2)&&(e[n+1]/s/1e3|0)==q(10,t-3)-1,o}function He(e,t,i){for(var r,n=[0],s,o=0,a=e.length;o<a;){for(s=n.length;s--;)n[s]*=t;for(n[0]+=at.indexOf(e.charAt(o++)),r=0;r<n.length;r++)n[r]>i-1&&(n[r+1]===void 0&&(n[r+1]=0),n[r+1]+=n[r]/i|0,n[r]%=i)}return n.reverse()}function Ii(e,t){var i,r,n;if(t.isZero())return t;r=t.d.length,r<32?(i=Math.ceil(r/3),n=(1/Je(4,i)).toString()):(i=16,n="2.3283064365386962890625e-10"),e.precision+=i,t=Pe(e,1,t.times(n),new e(1));for(var s=i;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=i,t}var A=function(){function e(r,n,s){var o,a=0,c=r.length;for(r=r.slice();c--;)o=r[c]*n+a,r[c]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,n,s,o){var a,c;if(s!=o)c=s>o?1:-1;else for(a=c=0;a<s;a++)if(r[a]!=n[a]){c=r[a]>n[a]?1:-1;break}return c}function i(r,n,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<n[s]?1:0,r[s]=a*o+r[s]-n[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,n,s,o,a,c){var u,f,l,h,m,w,g,b,S,R,E,I,O,U,_,me,L,X,B,re,We=r.constructor,Xe=r.s==n.s?1:-1,Q=r.d,M=n.d;if(!Q||!Q[0]||!M||!M[0])return new We(!r.s||!n.s||(Q?M&&Q[0]==M[0]:!M)?NaN:Q&&Q[0]==0||!M?Xe*0:Xe/0);for(c?(m=1,f=r.e-n.e):(c=z,m=y,f=K(r.e/m)-K(n.e/m)),B=M.length,L=Q.length,S=new We(Xe),R=S.d=[],l=0;M[l]==(Q[l]||0);l++);if(M[l]>(Q[l]||0)&&f--,s==null?(U=s=We.precision,o=We.rounding):a?U=s+(r.e-n.e)+1:U=s,U<0)R.push(1),w=!0;else{if(U=U/m+2|0,l=0,B==1){for(h=0,M=M[0],U++;(l<L||h)&&U--;l++)_=h*c+(Q[l]||0),R[l]=_/M|0,h=_%M|0;w=h||l<L}else{for(h=c/(M[0]+1)|0,h>1&&(M=e(M,h,c),Q=e(Q,h,c),B=M.length,L=Q.length),me=B,E=Q.slice(0,B),I=E.length;I<B;)E[I++]=0;re=M.slice(),re.unshift(0),X=M[0],M[1]>=c/2&&++X;do h=0,u=t(M,E,B,I),u<0?(O=E[0],B!=I&&(O=O*c+(E[1]||0)),h=O/X|0,h>1?(h>=c&&(h=c-1),g=e(M,h,c),b=g.length,I=E.length,u=t(g,E,b,I),u==1&&(h--,i(g,B<b?re:M,b,c))):(h==0&&(u=h=1),g=M.slice()),b=g.length,b<I&&g.unshift(0),i(E,g,I,c),u==-1&&(I=E.length,u=t(M,E,B,I),u<1&&(h++,i(E,B<I?re:M,I,c))),I=E.length):u===0&&(h++,E=[0]),R[l++]=h,u&&E[0]?E[I++]=Q[me]||0:(E=[Q[me]],I=1);while((me++<L||E[0]!==void 0)&&U--);w=E[0]!==void 0}R[0]||R.shift()}if(m==1)S.e=f,ei=w;else{for(l=1,h=R[0];h>=10;h/=10)l++;S.e=l+f*m-1,v(S,a?s+S.e+1:s,o,w)}return S}}();function v(e,t,i,r){var n,s,o,a,c,u,f,l,h,m=e.constructor;e:if(t!=null){if(l=e.d,!l)return e;for(n=1,a=l[0];a>=10;a/=10)n++;if(s=t-n,s<0)s+=y,o=t,f=l[h=0],c=f/q(10,n-o-1)%10|0;else if(h=Math.ceil((s+1)/y),a=l.length,h>=a)if(r){for(;a++<=h;)l.push(0);f=c=0,n=1,s%=y,o=s-y+1}else break e;else{for(f=a=l[h],n=1;a>=10;a/=10)n++;s%=y,o=s-y+n,c=o<0?0:f/q(10,n-o-1)%10|0}if(r=r||t<0||l[h+1]!==void 0||(o<0?f:f%q(10,n-o-1)),u=i<4?(c||r)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||r||i==6&&(s>0?o>0?f/q(10,n-o):0:l[h-1])%10&1||i==(e.s<0?8:7)),t<1||!l[0])return l.length=0,u?(t-=e.e+1,l[0]=q(10,(y-t%y)%y),e.e=-t||0):l[0]=e.e=0,e;if(s==0?(l.length=h,a=1,h--):(l.length=h+1,a=q(10,y-s),l[h]=o>0?(f/q(10,n-o)%q(10,o)|0)*a:0),u)for(;;)if(h==0){for(s=1,o=l[0];o>=10;o/=10)s++;for(o=l[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,l[0]==z&&(l[0]=1));break}else{if(l[h]+=a,l[h]!=z)break;l[h--]=0,a=1}for(s=l.length;l[--s]===0;)l.pop()}return N&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function ie(e,t,i){if(!e.isFinite())return ui(e);var r,n=e.e,s=j(e.d),o=s.length;return t?(i&&(r=i-o)>0?s=s.charAt(0)+"."+s.slice(1)+ae(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):n<0?(s="0."+ae(-n-1)+s,i&&(r=i-o)>0&&(s+=ae(r))):n>=o?(s+=ae(n+1-o),i&&(r=i-n-1)>0&&(s=s+"."+ae(r))):((r=n+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),i&&(r=i-o)>0&&(n+1===o&&(s+="."),s+=ae(r))),s}function ze(e,t){var i=e[0];for(t*=y;i>=10;i/=10)t++;return t}function $e(e,t,i){if(t>ki)throw N=!0,i&&(e.precision=i),Error(ti);return v(new e(Ge),t,1,!0)}function te(e,t,i){if(t>ct)throw Error(ti);return v(new e(Ye),t,i,!0)}function si(e){var t=e.length-1,i=t*y+1;if(t=e[t],t){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function ae(e){for(var t="";e--;)t+="0";return t}function oi(e,t,i,r){var n,s=new e(1),o=Math.ceil(r/y+4);for(N=!1;;){if(i%2&&(s=s.times(t),_t(s.d,o)&&(n=!0)),i=K(i/2),i===0){i=s.d.length-1,n&&s.d[i]===0&&++s.d[i];break}t=t.times(t),_t(t.d,o)}return N=!0,s}function Lt(e){return e.d[e.d.length-1]&1}function ai(e,t,i){for(var r,n,s=new e(t[0]),o=0;++o<t.length;){if(n=new e(t[o]),!n.s){s=n;break}r=s.cmp(n),(r===i||r===0&&s.s===i)&&(s=n)}return s}function lt(e,t){var i,r,n,s,o,a,c,u=0,f=0,l=0,h=e.constructor,m=h.rounding,w=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(N=!1,c=w):c=t,a=new h(.03125);e.e>-2;)e=e.times(a),l+=5;for(r=Math.log(q(2,l))/Math.LN10*2+5|0,c+=r,i=s=o=new h(1),h.precision=c;;){if(s=v(s.times(e),c,1),i=i.times(++f),a=o.plus(A(s,i,c,1)),j(a.d).slice(0,c)===j(o.d).slice(0,c)){for(n=l;n--;)o=v(o.times(o),c,1);if(t==null)if(u<3&&qe(o.d,c-r,m,u))h.precision=c+=10,i=s=a=new h(1),f=0,u++;else return v(o,h.precision=w,m,N=!0);else return h.precision=w,o}o=a}}function he(e,t){var i,r,n,s,o,a,c,u,f,l,h,m=1,w=10,g=e,b=g.d,S=g.constructor,R=S.rounding,E=S.precision;if(g.s<0||!b||!b[0]||!g.e&&b[0]==1&&b.length==1)return new S(b&&!b[0]?-1/0:g.s!=1?NaN:b?0:g);if(t==null?(N=!1,f=E):f=t,S.precision=f+=w,i=j(b),r=i.charAt(0),Math.abs(s=g.e)<15e14){for(;r<7&&r!=1||r==1&&i.charAt(1)>3;)g=g.times(e),i=j(g.d),r=i.charAt(0),m++;s=g.e,r>1?(g=new S("0."+i),s++):g=new S(r+"."+i.slice(1))}else return u=$e(S,f+2,E).times(s+""),g=he(new S(r+"."+i.slice(1)),f-w).plus(u),S.precision=E,t==null?v(g,E,R,N=!0):g;for(l=g,c=o=g=A(g.minus(1),g.plus(1),f,1),h=v(g.times(g),f,1),n=3;;){if(o=v(o.times(h),f,1),u=c.plus(A(o,new S(n),f,1)),j(u.d).slice(0,f)===j(c.d).slice(0,f))if(c=c.times(2),s!==0&&(c=c.plus($e(S,f+2,E).times(s+""))),c=A(c,new S(m),f,1),t==null)if(qe(c.d,f-w,R,a))S.precision=f+=w,u=o=g=A(l.minus(1),l.plus(1),f,1),h=v(g.times(g),f,1),n=a=1;else return v(c,S.precision=E,R,N=!0);else return S.precision=E,c;c=u,n+=2}}function ui(e){return String(e.s*e.s/0)}function xe(e,t){var i,r,n;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(i<0&&(i=r),i+=+t.slice(r+1),t=t.substring(0,r)):i<0&&(i=t.length),r=0;t.charCodeAt(r)===48;r++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(r,n),t){if(n-=r,e.e=i=i-r-1,e.d=[],r=(i+1)%y,i<0&&(r+=y),r<n){for(r&&e.d.push(+t.slice(0,r)),n-=y;r<n;)e.d.push(+t.slice(r,r+=y));t=t.slice(r),r=y-t.length}else r-=n;for(;r--;)t+="0";e.d.push(+t),N&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Ai(e,t){var i,r,n,s,o,a,c,u,f;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),ni.test(t))return xe(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Oi.test(t))i=16,t=t.toLowerCase();else if(Di.test(t))i=2;else if(Ti.test(t))i=8;else throw Error(de+t);for(s=t.search(/p/i),s>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,n=oi(r,new r(i),s,s*2)),u=He(t,i,z),f=u.length-1,s=f;u[s]===0;--s)u.pop();return s<0?new r(e.s*0):(e.e=ze(u,f),e.d=u,N=!1,o&&(e=A(e,n,a*4)),c&&(e=e.times(Math.abs(c)<54?q(2,c):J.pow(2,c))),N=!0,e)}function Mi(e,t){var i,r=t.d.length;if(r<3)return t.isZero()?t:Pe(e,2,t,t);i=1.4*Math.sqrt(r),i=i>16?16:i|0,t=t.times(1/Je(5,i)),t=Pe(e,2,t,t);for(var n,s=new e(5),o=new e(16),a=new e(20);i--;)n=t.times(t),t=t.times(s.plus(n.times(o.times(n).minus(a))));return t}function Pe(e,t,i,r,n){var s,o,a,c,u=e.precision,f=Math.ceil(u/y);for(N=!1,c=i.times(i),a=new e(r);;){if(o=A(a.times(c),new e(t++*t++),u,1),a=n?r.plus(o):r.minus(o),r=A(o.times(c),new e(t++*t++),u,1),o=a.plus(r),o.d[f]!==void 0){for(s=f;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return N=!0,o.d.length=f+1,o}function Je(e,t){for(var i=e;--t;)i*=e;return i}function ci(e,t){var i,r=t.s<0,n=te(e,e.precision,1),s=n.times(.5);if(t=t.abs(),t.lte(s))return se=r?4:1,t;if(i=t.divToInt(n),i.isZero())se=r?3:2;else{if(t=t.minus(i.times(n)),t.lte(s))return se=Lt(i)?r?2:3:r?4:1,t;se=Lt(i)?r?1:4:r?3:2}return t.minus(n).abs()}function Dt(e,t,i,r){var n,s,o,a,c,u,f,l,h,m=e.constructor,w=i!==void 0;if(w?(Z(i,1,pe),r===void 0?r=m.rounding:Z(r,0,8)):(i=m.precision,r=m.rounding),!e.isFinite())f=ui(e);else{for(f=ie(e),o=f.indexOf("."),w?(n=2,t==16?i=i*4-3:t==8&&(i=i*3-2)):n=t,o>=0&&(f=f.replace(".",""),h=new m(1),h.e=f.length-o,h.d=He(ie(h),10,n),h.e=h.d.length),l=He(f,10,n),s=c=l.length;l[--c]==0;)l.pop();if(!l[0])f=w?"0p+0":"0";else{if(o<0?s--:(e=new m(e),e.d=l,e.e=s,e=A(e,h,i,r,0,n),l=e.d,s=e.e,u=ei),o=l[i],a=n/2,u=u||l[i+1]!==void 0,u=r<4?(o!==void 0||u)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||u||r===6&&l[i-1]&1||r===(e.s<0?8:7)),l.length=i,u)for(;++l[--i]>n-1;)l[i]=0,i||(++s,l.unshift(1));for(c=l.length;!l[c-1];--c);for(o=0,f="";o<c;o++)f+=at.charAt(l[o]);if(w){if(c>1)if(t==16||t==8){for(o=t==16?4:3,--c;c%o;c++)f+="0";for(l=He(f,n,t),c=l.length;!l[c-1];--c);for(o=1,f="1.";o<c;o++)f+=at.charAt(l[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)f="0"+f;f="0."+f}else if(++s>c)for(s-=c;s--;)f+="0";else s<c&&(f=f.slice(0,s)+"."+f.slice(s))}f=(t==16?"0x":t==2?"0b":t==8?"0o":"")+f}return e.s<0?"-"+f:f}function _t(e,t){if(e.length>t)return e.length=t,!0}function Pi(e){return new this(e).abs()}function Ui(e){return new this(e).acos()}function Li(e){return new this(e).acosh()}function _i(e,t){return new this(e).plus(t)}function qi(e){return new this(e).asin()}function Bi(e){return new this(e).asinh()}function ji(e){return new this(e).atan()}function Qi(e){return new this(e).atanh()}function Wi(e,t){e=new this(e),t=new this(t);var i,r=this.precision,n=this.rounding,s=r+4;return!e.s||!t.s?i=new this(NaN):!e.d&&!t.d?(i=te(this,s,1).times(t.s>0?.25:.75),i.s=e.s):!t.d||e.isZero()?(i=t.s<0?te(this,r,n):new this(0),i.s=e.s):!e.d||t.isZero()?(i=te(this,s,1).times(.5),i.s=e.s):t.s<0?(this.precision=s,this.rounding=1,i=this.atan(A(e,t,s,1)),t=te(this,s,1),this.precision=r,this.rounding=n,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(A(e,t,s,1)),i}function Ki(e){return new this(e).cbrt()}function Hi(e){return v(e=new this(e),e.e+1,2)}function xi(e,t,i){return new this(e).clamp(t,i)}function Zi(e){if(!e||typeof e!="object")throw Error(Ve+"Object expected");var t,i,r,n=e.defaults===!0,s=["precision",1,pe,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,ot,"maxE",0,ot,"minE",-9e15,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(i=s[t],n&&(this[i]=ut[i]),(r=e[i])!==void 0)if(K(r)===r&&r>=s[t+1]&&r<=s[t+2])this[i]=r;else throw Error(de+i+": "+r);if(i="crypto",n&&(this[i]=ut[i]),(r=e[i])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[i]=!0;else throw Error(ii);else this[i]=!1;else throw Error(de+i+": "+r);return this}function Gi(e){return new this(e).cos()}function Yi(e){return new this(e).cosh()}function li(e){var t,i,r;function n(s){var o,a,c,u=this;if(!(u instanceof n))return new n(s);if(u.constructor=n,qt(s)){u.s=s.s,N?!s.d||s.e>n.maxE?(u.e=NaN,u.d=null):s.e<n.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;N?o>n.maxE?(u.e=NaN,u.d=null):o<n.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[s]):(u.e=o,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return xe(u,s.toString())}if(c==="string")return(a=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(a===43&&(s=s.slice(1)),u.s=1),ni.test(s)?xe(u,s):Ai(u,s);if(c==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,xe(u,s.toString());throw Error(de+s)}if(n.prototype=p,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Zi,n.clone=li,n.isDecimal=qt,n.abs=Pi,n.acos=Ui,n.acosh=Li,n.add=_i,n.asin=qi,n.asinh=Bi,n.atan=ji,n.atanh=Qi,n.atan2=Wi,n.cbrt=Ki,n.ceil=Hi,n.clamp=xi,n.cos=Gi,n.cosh=Yi,n.div=$i,n.exp=Vi,n.floor=zi,n.hypot=Ji,n.ln=Xi,n.log=er,n.log10=ir,n.log2=tr,n.max=rr,n.min=nr,n.mod=sr,n.mul=or,n.pow=ar,n.random=ur,n.round=cr,n.sign=lr,n.sin=fr,n.sinh=hr,n.sqrt=dr,n.sub=pr,n.sum=mr,n.tan=gr,n.tanh=wr,n.trunc=vr,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(i=r[t++])||(e[i]=this[i]);return n.config(e),n}function $i(e,t){return new this(e).div(t)}function Vi(e){return new this(e).exp()}function zi(e){return v(e=new this(e),e.e+1,3)}function Ji(){var e,t,i=new this(0);for(N=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return N=!0,new this(1/0);i=t}return N=!0,i.sqrt()}function qt(e){return e instanceof J||e&&e.toStringTag===ri||!1}function Xi(e){return new this(e).ln()}function er(e,t){return new this(e).log(t)}function tr(e){return new this(e).log(2)}function ir(e){return new this(e).log(10)}function rr(){return ai(this,arguments,-1)}function nr(){return ai(this,arguments,1)}function sr(e,t){return new this(e).mod(t)}function or(e,t){return new this(e).mul(t)}function ar(e,t){return new this(e).pow(t)}function ur(e){var t,i,r,n,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:Z(e,1,pe),r=Math.ceil(e/y),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)n=t[s],n>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)n=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(n%1e7),s+=4);s=r/4}else throw Error(ii);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=y,r&&e&&(n=q(10,y-e),a[s]=(r/n|0)*n);a[s]===0;s--)a.pop();if(s<0)i=0,a=[0];else{for(i=-1;a[0]===0;i-=y)a.shift();for(r=1,n=a[0];n>=10;n/=10)r++;r<y&&(i-=y-r)}return o.e=i,o.d=a,o}function cr(e){return v(e=new this(e),e.e+1,this.rounding)}function lr(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function fr(e){return new this(e).sin()}function hr(e){return new this(e).sinh()}function dr(e){return new this(e).sqrt()}function pr(e,t){return new this(e).sub(t)}function mr(){var e=0,t=arguments,i=new this(t[e]);for(N=!1;i.s&&++e<t.length;)i=i.plus(t[e]);return N=!0,v(i,this.precision,this.rounding)}function gr(e){return new this(e).tan()}function wr(e){return new this(e).tanh()}function vr(e){return v(e=new this(e),e.e+1,1)}p[Symbol.for("nodejs.util.inspect.custom")]=p.toString;p[Symbol.toStringTag]="Decimal";var J=p.constructor=li(ut);Ge=new J(Ge);Ye=new J(Ye);J.set({toExpNeg:-20,toExpPos:20});const oe=e=>new J(e||0),rt=(e,t)=>oe(e).add(oe(t)).toFixed(8),nt=(e,t)=>oe(e).minus(oe(t)).toFixed(8),Bt=(e,t)=>oe(e).mul(oe(t)).toFixed(8),yr=(e,t)=>oe(e).div(oe(t)).toFixed(8),rn=e=>oe(e).toSignificantDigits(8).toString(),nn=(e,t)=>new J(e).div(t).toDecimalPlaces(8,J.ROUND_DOWN).toString(),sn=(e,t)=>new J(e).mul(t).toDecimalPlaces(8,J.ROUND_DOWN).toString(),on=(e,t)=>new J(e).gte(t),jt=e=>{let t;const i=new Set,r=(u,f)=>{const l=typeof u=="function"?u(t):u;if(!Object.is(l,t)){const h=t;t=f??(typeof l!="object"||l===null)?l:Object.assign({},t,l),i.forEach(m=>m(t,h))}},n=()=>t,a={setState:r,getState:n,getInitialState:()=>c,subscribe:u=>(i.add(u),()=>i.delete(u))},c=t=e(r,n,a);return a},br=e=>e?jt(e):jt,Sr=e=>e;function Er(e,t=Sr){const i=Mt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return Mt.useDebugValue(i),i}const Qt=e=>{const t=br(e),i=r=>Er(t,r);return Object.assign(i,t),i},Cr=e=>e?Qt(e):Qt,an=Cr((e,t)=>({cash:"0",holdings:{},orders:[],selectedPrice:null,setSelectedPrice:i=>e({selectedPrice:i}),buy:async(i,r,n,s,o)=>{await Ut(Ue(G,"coinwallet",s,"orders"),{side:"buy",symbol:i,price:r,amount:n,filledAmount:"0",timestamp:it()});const a=nt(t().cash,o);if(parseFloat(a)<0)throw new Error("Not Enough money");await t().initFromServer(s)},sell:async(i,r,n,s)=>{await Ut(Ue(G,"coinwallet",s,"orders"),{side:"sell",symbol:i,price:r,amount:n,filledAmount:"0",timestamp:it()}),await t().initFromServer(s)},cancelOrder:async(i,r)=>{const n=ge(G,"coinwallet",r,"orders",i);await Ri(n),await t().initFromServer(r)},initFromServer:async i=>{if(!i){e({cash:"0",holdings:{},orders:[]});return}const r=ge(G,"coinwallet",i),n=Ue(G,`coinwallet/${i}/holdings`),s=Ue(G,`coinwallet/${i}/orders`),[o,a,c]=await Promise.all([tt(r),Pt(n),Pt(s)]);let u="100000";o.exists()?u=o.data().cash:await Ni(r,{cash:u,uid:i});const f=a.docs.reduce((h,m)=>{const w=m.data();return h[m.id]={symbol:m.id,price:w.price,amount:w.amount},h},{}),l=c.docs.map(h=>({docId:h.id,...h.data()}));e({cash:u,holdings:f,orders:l})},matchOrders:async(i,r)=>{const n=Ci(G),s=ge(G,"coinwallet",r),o=await tt(s);if(!o.exists())throw alert("유저 지갑에 문제가 발생하였습니다. 관리자에게 문의하세요"),new Error("지갑 없음");let a=o.data().cash;const c={};for(const u of i){const{symbol:f,amount:l,price:h,side:m,docId:w}=u,g=ge(G,"coinwallet",r,"holdings",f),b=await tt(g),S=b.exists()?b.data():null,R=Bt(l,h);if(m==="buy"){if(S){const I=Bt(S.amount,S.price),O=rt(S.amount,l),U=yr(rt(I,R),O);c[f]={symbol:f,amount:O,price:U}}else c[f]={symbol:f,amount:l,price:h};a=nt(a,R)}if(m==="sell"){if(!S)throw alert("보유 자산이 존재하지 않습니다."),new Error("보유 자산 없음");c[f]={symbol:f,price:S.price,amount:nt(S.amount,l)},a=rt(a,R)}n.delete(ge(G,"coinwallet",r,"orders",w));const E=ge(Ue(G,"coinwallet",r,"fills"));n.set(E,{orderId:w,symbol:f,price:h,amount:l,type:m,filledAt:it()})}for(const u in c){const f=c[u],l=ge(G,"coinwallet",r,"holdings",u);n.set(l,f)}n.update(s,{cash:a}),await n.commit(),i.length>0&&await t().initFromServer(r)}}));var Ot=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ne=typeof window>"u"||"Deno"in globalThis;function ft(){}function un(e,t){return typeof e=="function"?e(t):e}function ht(e){return typeof e=="number"&&e>=0&&e!==1/0}function fi(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ze(e,t){return typeof e=="function"?e(t):e}function V(e,t){return typeof e=="function"?e(t):e}function cn(e,t){const{type:i="all",exact:r,fetchStatus:n,predicate:s,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==Nr(o,t.options))return!1}else if(!Tt(t.queryKey,o))return!1}if(i!=="all"){const c=t.isActive();if(i==="active"&&!c||i==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||n&&n!==t.state.fetchStatus||s&&!s(t))}function ln(e,t){const{exact:i,status:r,predicate:n,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(i){if(dt(t.options.mutationKey)!==dt(s))return!1}else if(!Tt(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function Nr(e,t){return((t==null?void 0:t.queryKeyHashFn)||dt)(e)}function dt(e){return JSON.stringify(e,(t,i)=>mt(i)?Object.keys(i).sort().reduce((r,n)=>(r[n]=i[n],r),{}):i)}function Tt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(i=>!Tt(e[i],t[i])):!1}function hi(e,t){if(e===t)return e;const i=Wt(e)&&Wt(t);if(i||mt(e)&&mt(t)){const r=i?e:Object.keys(e),n=r.length,s=i?t:Object.keys(t),o=s.length,a=i?[]:{};let c=0;for(let u=0;u<o;u++){const f=i?u:s[u];(!i&&r.includes(f)||i)&&e[f]===void 0&&t[f]===void 0?(a[f]=void 0,c++):(a[f]=hi(e[f],t[f]),a[f]===e[f]&&e[f]!==void 0&&c++)}return n===o&&c===n?e:a}return t}function pt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}function Wt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function mt(e){if(!Kt(e))return!1;const t=e.constructor;if(t===void 0)return!0;const i=t.prototype;return!(!Kt(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Kt(e){return Object.prototype.toString.call(e)==="[object Object]"}function Rr(e){return new Promise(t=>{setTimeout(t,e)})}function gt(e,t,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,t):i.structuralSharing!==!1?hi(e,t):t}function fn(e,t,i=0){const r=[...e,t];return i&&r.length>i?r.slice(1):r}function hn(e,t,i=0){const r=[t,...e];return i&&r.length>i?r.slice(0,-1):r}var di=Symbol();function Dr(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===di?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var we,ue,Re,Yt,Or=(Yt=class extends Ot{constructor(){super();T(this,we);T(this,ue);T(this,Re);C(this,Re,t=>{if(!Ne&&window.addEventListener){const i=()=>t();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}})}onSubscribe(){d(this,ue)||this.setEventListener(d(this,Re))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,ue))==null||t.call(this),C(this,ue,void 0))}setEventListener(t){var i;C(this,Re,t),(i=d(this,ue))==null||i.call(this),C(this,ue,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){d(this,we)!==t&&(C(this,we,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(i=>{i(t)})}isFocused(){var t;return typeof d(this,we)=="boolean"?d(this,we):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},we=new WeakMap,ue=new WeakMap,Re=new WeakMap,Yt),pi=new Or,De,ce,Oe,$t,Tr=($t=class extends Ot{constructor(){super();T(this,De,!0);T(this,ce);T(this,Oe);C(this,Oe,t=>{if(!Ne&&window.addEventListener){const i=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",r)}}})}onSubscribe(){d(this,ce)||this.setEventListener(d(this,Oe))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,ce))==null||t.call(this),C(this,ce,void 0))}setEventListener(t){var i;C(this,Oe,t),(i=d(this,ce))==null||i.call(this),C(this,ce,t(this.setOnline.bind(this)))}setOnline(t){d(this,De)!==t&&(C(this,De,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return d(this,De)}},De=new WeakMap,ce=new WeakMap,Oe=new WeakMap,$t),mi=new Tr;function wt(){let e,t;const i=new Promise((n,s)=>{e=n,t=s});i.status="pending",i.catch(()=>{});function r(n){Object.assign(i,n),delete i.resolve,delete i.reject}return i.resolve=n=>{r({status:"fulfilled",value:n}),e(n)},i.reject=n=>{r({status:"rejected",reason:n}),t(n)},i}function Fr(e){return Math.min(1e3*2**e,3e4)}function gi(e){return(e??"online")==="online"?mi.isOnline():!0}var wi=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function st(e){return e instanceof wi}function kr(e){let t=!1,i=0,r=!1,n;const s=wt(),o=g=>{var b;r||(h(new wi(g)),(b=e.abort)==null||b.call(e))},a=()=>{t=!0},c=()=>{t=!1},u=()=>pi.isFocused()&&(e.networkMode==="always"||mi.isOnline())&&e.canRun(),f=()=>gi(e.networkMode)&&e.canRun(),l=g=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,g),n==null||n(),s.resolve(g))},h=g=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,g),n==null||n(),s.reject(g))},m=()=>new Promise(g=>{var b;n=S=>{(r||u())&&g(S)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;n=void 0,r||(g=e.onContinue)==null||g.call(e)}),w=()=>{if(r)return;let g;const b=i===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(S){g=Promise.reject(S)}Promise.resolve(g).then(l).catch(S=>{var U;if(r)return;const R=e.retry??(Ne?0:3),E=e.retryDelay??Fr,I=typeof E=="function"?E(i,S):E,O=R===!0||typeof R=="number"&&i<R||typeof R=="function"&&R(i,S);if(t||!O){h(S);return}i++,(U=e.onFail)==null||U.call(e,i,S),Rr(I).then(()=>u()?void 0:m()).then(()=>{t?h(S):w()})})};return{promise:s,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:a,continueRetry:c,canStart:f,start:()=>(f()?w():m().then(w),s)}}var Ir=e=>setTimeout(e,0);function Ar(){let e=[],t=0,i=a=>{a()},r=a=>{a()},n=Ir;const s=a=>{t?e.push(a):n(()=>{i(a)})},o=()=>{const a=e;e=[],a.length&&n(()=>{r(()=>{a.forEach(c=>{i(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{i=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{n=a}}}var Ft=Ar(),ve,Vt,Mr=(Vt=class{constructor(){T(this,ve)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ht(this.gcTime)&&C(this,ve,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ne?1/0:5*60*1e3))}clearGcTimeout(){d(this,ve)&&(clearTimeout(d(this,ve)),C(this,ve,void 0))}},ve=new WeakMap,Vt),Te,Fe,Y,ye,W,Be,be,$,ne,zt,dn=(zt=class extends Mr{constructor(t){super();T(this,$);T(this,Te);T(this,Fe);T(this,Y);T(this,ye);T(this,W);T(this,Be);T(this,be);C(this,be,!1),C(this,Be,t.defaultOptions),this.setOptions(t.options),this.observers=[],C(this,ye,t.client),C(this,Y,d(this,ye).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,C(this,Te,Pr(this.options)),this.state=t.state??d(this,Te),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=d(this,W))==null?void 0:t.promise}setOptions(t){this.options={...d(this,Be),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,Y).remove(this)}setData(t,i){const r=gt(this.state.data,t,this.options);return k(this,$,ne).call(this,{data:r,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),r}setState(t,i){k(this,$,ne).call(this,{type:"setState",state:t,setStateOptions:i})}cancel(t){var r,n;const i=(r=d(this,W))==null?void 0:r.promise;return(n=d(this,W))==null||n.cancel(t),i?i.then(ft).catch(ft):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,Te))}isActive(){return this.observers.some(t=>V(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===di||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!fi(this.state.dataUpdatedAt,t)}onFocus(){var i;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(i=d(this,W))==null||i.continue()}onOnline(){var i;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(i=d(this,W))==null||i.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),d(this,Y).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(i=>i!==t),this.observers.length||(d(this,W)&&(d(this,be)?d(this,W).cancel({revert:!0}):d(this,W).cancelRetry()),this.scheduleGc()),d(this,Y).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,$,ne).call(this,{type:"invalidate"})}fetch(t,i){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(d(this,W))return d(this,W).continueRetry(),d(this,W).promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(h=>h.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(C(this,be,!0),r.signal)})},s=()=>{const l=Dr(this.options,i),h={client:d(this,ye),queryKey:this.queryKey,meta:this.meta};return n(h),C(this,be,!1),this.options.persister?this.options.persister(l,h,this):l(h)},o={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:d(this,ye),state:this.state,fetchFn:s};n(o),(c=this.options.behavior)==null||c.onFetch(o,this),C(this,Fe,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&k(this,$,ne).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const a=l=>{var h,m,w,g;st(l)&&l.silent||k(this,$,ne).call(this,{type:"error",error:l}),st(l)||((m=(h=d(this,Y).config).onError)==null||m.call(h,l,this),(g=(w=d(this,Y).config).onSettled)==null||g.call(w,this.state.data,l,this)),this.scheduleGc()};return C(this,W,kr({initialPromise:i==null?void 0:i.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:l=>{var h,m,w,g;if(l===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(b){a(b);return}(m=(h=d(this,Y).config).onSuccess)==null||m.call(h,l,this),(g=(w=d(this,Y).config).onSettled)==null||g.call(w,l,this.state.error,this),this.scheduleGc()},onError:a,onFail:(l,h)=>{k(this,$,ne).call(this,{type:"failed",failureCount:l,error:h})},onPause:()=>{k(this,$,ne).call(this,{type:"pause"})},onContinue:()=>{k(this,$,ne).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),d(this,W).start()}},Te=new WeakMap,Fe=new WeakMap,Y=new WeakMap,ye=new WeakMap,W=new WeakMap,Be=new WeakMap,be=new WeakMap,$=new WeakSet,ne=function(t){const i=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...vi(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return st(n)&&n.revert&&d(this,Fe)?{...d(this,Fe),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=i(this.state),Ft.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),d(this,Y).notify({query:this,type:"updated",action:t})})},zt);function vi(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gi(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Pr(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,i=t!==void 0,r=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var x,D,je,H,Se,ke,le,ee,Qe,Ie,Ae,Ee,Ce,fe,Me,F,Le,vt,yt,bt,St,Et,Ct,Nt,yi,Jt,Ur=(Jt=class extends Ot{constructor(t,i){super();T(this,F);T(this,x);T(this,D);T(this,je);T(this,H);T(this,Se);T(this,ke);T(this,le);T(this,ee);T(this,Qe);T(this,Ie);T(this,Ae);T(this,Ee);T(this,Ce);T(this,fe);T(this,Me,new Set);this.options=i,C(this,x,t),C(this,ee,null),C(this,le,wt()),this.options.experimental_prefetchInRender||d(this,le).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(i)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,D).addObserver(this),Ht(d(this,D),this.options)?k(this,F,Le).call(this):this.updateResult(),k(this,F,St).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rt(d(this,D),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rt(d(this,D),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,k(this,F,Et).call(this),k(this,F,Ct).call(this),d(this,D).removeObserver(this)}setOptions(t){const i=this.options,r=d(this,D);if(this.options=d(this,x).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof V(this.options.enabled,d(this,D))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");k(this,F,Nt).call(this),d(this,D).setOptions(this.options),i._defaulted&&!pt(this.options,i)&&d(this,x).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,D),observer:this});const n=this.hasListeners();n&&xt(d(this,D),r,this.options,i)&&k(this,F,Le).call(this),this.updateResult(),n&&(d(this,D)!==r||V(this.options.enabled,d(this,D))!==V(i.enabled,d(this,D))||Ze(this.options.staleTime,d(this,D))!==Ze(i.staleTime,d(this,D)))&&k(this,F,vt).call(this);const s=k(this,F,yt).call(this);n&&(d(this,D)!==r||V(this.options.enabled,d(this,D))!==V(i.enabled,d(this,D))||s!==d(this,fe))&&k(this,F,bt).call(this,s)}getOptimisticResult(t){const i=d(this,x).getQueryCache().build(d(this,x),t),r=this.createResult(i,t);return _r(this,r)&&(C(this,H,r),C(this,ke,this.options),C(this,Se,d(this,D).state)),r}getCurrentResult(){return d(this,H)}trackResult(t,i){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),i==null||i(n),t[n])})}),r}trackProp(t){d(this,Me).add(t)}getCurrentQuery(){return d(this,D)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const i=d(this,x).defaultQueryOptions(t),r=d(this,x).getQueryCache().build(d(this,x),i);return r.fetch().then(()=>this.createResult(r,i))}fetch(t){return k(this,F,Le).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,H)))}createResult(t,i){var me;const r=d(this,D),n=this.options,s=d(this,H),o=d(this,Se),a=d(this,ke),u=t!==r?t.state:d(this,je),{state:f}=t;let l={...f},h=!1,m;if(i._optimisticResults){const L=this.hasListeners(),X=!L&&Ht(t,i),B=L&&xt(t,r,i,n);(X||B)&&(l={...l,...vi(f.data,t.options)}),i._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:w,errorUpdatedAt:g,status:b}=l;if(i.select&&l.data!==void 0)if(s&&l.data===(o==null?void 0:o.data)&&i.select===d(this,Qe))m=d(this,Ie);else try{C(this,Qe,i.select),m=i.select(l.data),m=gt(s==null?void 0:s.data,m,i),C(this,Ie,m),C(this,ee,null)}catch(L){C(this,ee,L)}else m=l.data;if(i.placeholderData!==void 0&&m===void 0&&b==="pending"){let L;if(s!=null&&s.isPlaceholderData&&i.placeholderData===(a==null?void 0:a.placeholderData))L=s.data;else if(L=typeof i.placeholderData=="function"?i.placeholderData((me=d(this,Ae))==null?void 0:me.state.data,d(this,Ae)):i.placeholderData,i.select&&L!==void 0)try{L=i.select(L),C(this,ee,null)}catch(X){C(this,ee,X)}L!==void 0&&(b="success",m=gt(s==null?void 0:s.data,L,i),h=!0)}d(this,ee)&&(w=d(this,ee),m=d(this,Ie),g=Date.now(),b="error");const S=l.fetchStatus==="fetching",R=b==="pending",E=b==="error",I=R&&S,O=m!==void 0,_={status:b,fetchStatus:l.fetchStatus,isPending:R,isSuccess:b==="success",isError:E,isInitialLoading:I,isLoading:I,data:m,dataUpdatedAt:l.dataUpdatedAt,error:w,errorUpdatedAt:g,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>u.dataUpdateCount||l.errorUpdateCount>u.errorUpdateCount,isFetching:S,isRefetching:S&&!R,isLoadingError:E&&!O,isPaused:l.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&O,isStale:kt(t,i),refetch:this.refetch,promise:d(this,le)};if(this.options.experimental_prefetchInRender){const L=re=>{_.status==="error"?re.reject(_.error):_.data!==void 0&&re.resolve(_.data)},X=()=>{const re=C(this,le,_.promise=wt());L(re)},B=d(this,le);switch(B.status){case"pending":t.queryHash===r.queryHash&&L(B);break;case"fulfilled":(_.status==="error"||_.data!==B.value)&&X();break;case"rejected":(_.status!=="error"||_.error!==B.reason)&&X();break}}return _}updateResult(){const t=d(this,H),i=this.createResult(d(this,D),this.options);if(C(this,Se,d(this,D).state),C(this,ke,this.options),d(this,Se).data!==void 0&&C(this,Ae,d(this,D)),pt(i,t))return;C(this,H,i);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,s=typeof n=="function"?n():n;if(s==="all"||!s&&!d(this,Me).size)return!0;const o=new Set(s??d(this,Me));return this.options.throwOnError&&o.add("error"),Object.keys(d(this,H)).some(a=>{const c=a;return d(this,H)[c]!==t[c]&&o.has(c)})};k(this,F,yi).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&k(this,F,St).call(this)}},x=new WeakMap,D=new WeakMap,je=new WeakMap,H=new WeakMap,Se=new WeakMap,ke=new WeakMap,le=new WeakMap,ee=new WeakMap,Qe=new WeakMap,Ie=new WeakMap,Ae=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,fe=new WeakMap,Me=new WeakMap,F=new WeakSet,Le=function(t){k(this,F,Nt).call(this);let i=d(this,D).fetch(this.options,t);return t!=null&&t.throwOnError||(i=i.catch(ft)),i},vt=function(){k(this,F,Et).call(this);const t=Ze(this.options.staleTime,d(this,D));if(Ne||d(this,H).isStale||!ht(t))return;const r=fi(d(this,H).dataUpdatedAt,t)+1;C(this,Ee,setTimeout(()=>{d(this,H).isStale||this.updateResult()},r))},yt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,D)):this.options.refetchInterval)??!1},bt=function(t){k(this,F,Ct).call(this),C(this,fe,t),!(Ne||V(this.options.enabled,d(this,D))===!1||!ht(d(this,fe))||d(this,fe)===0)&&C(this,Ce,setInterval(()=>{(this.options.refetchIntervalInBackground||pi.isFocused())&&k(this,F,Le).call(this)},d(this,fe)))},St=function(){k(this,F,vt).call(this),k(this,F,bt).call(this,k(this,F,yt).call(this))},Et=function(){d(this,Ee)&&(clearTimeout(d(this,Ee)),C(this,Ee,void 0))},Ct=function(){d(this,Ce)&&(clearInterval(d(this,Ce)),C(this,Ce,void 0))},Nt=function(){const t=d(this,x).getQueryCache().build(d(this,x),this.options);if(t===d(this,D))return;const i=d(this,D);C(this,D,t),C(this,je,t.state),this.hasListeners()&&(i==null||i.removeObserver(this),t.addObserver(this))},yi=function(t){Ft.batch(()=>{t.listeners&&this.listeners.forEach(i=>{i(d(this,H))}),d(this,x).getQueryCache().notify({query:d(this,D),type:"observerResultsUpdated"})})},Jt);function Lr(e,t){return V(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ht(e,t){return Lr(e,t)||e.state.data!==void 0&&Rt(e,t,t.refetchOnMount)}function Rt(e,t,i){if(V(t.enabled,e)!==!1){const r=typeof i=="function"?i(e):i;return r==="always"||r!==!1&&kt(e,t)}return!1}function xt(e,t,i,r){return(e!==t||V(r.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&kt(e,i)}function kt(e,t){return V(t.enabled,e)!==!1&&e.isStaleByTime(Ze(t.staleTime,e))}function _r(e,t){return!pt(e.getCurrentResult(),t)}var bi=P.createContext(void 0),It=e=>{const t=P.useContext(bi);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pn=({client:e,children:t})=>(P.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Xt.jsx(bi.Provider,{value:e,children:t})),Si=P.createContext(!1),qr=()=>P.useContext(Si);Si.Provider;function Br(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var jr=P.createContext(Br()),Qr=()=>P.useContext(jr);function Wr(e,t){return typeof e=="function"?e(...t):!!e}function Zt(){}var Kr=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Hr=e=>{P.useEffect(()=>{e.clearReset()},[e])},xr=({result:e,errorResetBoundary:t,throwOnError:i,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||Wr(i,[e.error,r])),Zr=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...i)=>Math.max(t(...i),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Gr=(e,t)=>e.isLoading&&e.isFetching&&!t,Yr=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Gt=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function $r(e,t,i){var l,h,m,w,g;const r=It(),n=qr(),s=Qr(),o=r.defaultQueryOptions(e);(h=(l=r.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||h.call(l,o),o._optimisticResults=n?"isRestoring":"optimistic",Zr(o),Kr(o,s),Hr(s);const a=!r.getQueryCache().get(o.queryHash),[c]=P.useState(()=>new t(r,o)),u=c.getOptimisticResult(o),f=!n&&e.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(b=>{const S=f?c.subscribe(Ft.batchCalls(b)):Zt;return c.updateResult(),S},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),P.useEffect(()=>{c.setOptions(o)},[o,c]),Yr(o,u))throw Gt(o,c,s);if(xr({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||w.call(m,o,u),o.experimental_prefetchInRender&&!Ne&&Gr(u,n)){const b=a?Gt(o,c,s):(g=r.getQueryCache().get(o.queryHash))==null?void 0:g.promise;b==null||b.catch(Zt).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Vr(e,t){return $r(e,Ur)}var _e=(e=>(e.UPBIT_SYMBOL_LIST="UPBIT_SYMBOL_LIST",e.UPBIT_SYMBOL_TRADE_DATA="UPBIT_SYMBOL_TRADE_DATA",e.UPBIT_SYMBOLS_RESTAPI_TRADE_DATA="UPBIT_SYMBOLS_RESTAPI_TRADE_DATA",e.BINANCE_SYMBOLS_DATA="BINANCE_SYMBOLS_DATA",e))(_e||{});function mn(e){return new Date(e).toLocaleTimeString("ko-KR",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}async function gn(){const e=await fetch("https://open.er-api.com/v6/latest/USD");if(!e.ok)throw new Error("환율 데이터를 불러오는 데 실패했습니다.");return(await e.json()).rates.KRW}function zr(e){if(!e)return"other";const t=e.trim().charAt(0);return/[\uAC00-\uD7A3]/.test(t)?"korean":/[a-zA-Z]/.test(t)?"english":"other"}function Jr(e){const t=e.match(/^(.+)\((.+)\)$/);return t?[t[1],t[2]]:[e]}function wn(e,t,i){const r=zr(e),n=e.toLowerCase();if(r==="english"&&i.includes(e.toUpperCase()))return e;for(let s=0;s<t.length;s++){const{korean_name:o,english_name:a,market:c}=t[s],u=a.toLowerCase(),f=c.replace("KRW-","").toLowerCase();if(r==="korean"){if(Jr(o).map(h=>h.toLowerCase()).includes(n))return f}else if(r==="english"&&(u===n||f===n))return f}return""}function Ke(e){return typeof SharedWorker<"u"&&e instanceof SharedWorker}function vn(e,t){const i=new Map;return t.forEach(n=>{i.set(n.market.replace("KRW-",""),n.korean_name)}),i.get(e.replace("USDT",""))}function yn(e,t,i){const r=new Date(e);switch(t){case"seconds":r.setSeconds(r.getSeconds()-i);break;case"minutes":r.setMinutes(r.getMinutes()-i);break;case"days":r.setDate(r.getDate()-i);break;case"weeks":r.setDate(r.getDate()-i*7);break;case"months":r.setMonth(r.getMonth()-i);break;case"years":r.setFullYear(r.getFullYear()-i);break;default:throw new Error(`Invalid candle type: ${t}`)}return r.getTime()}function bn(e,t){return e===0?"0":e>=1e3?Number.parseFloat(e.toPrecision(t)).toLocaleString():Number.parseFloat(e.toPrecision(t)).toString()}const Sn=e=>Vr({queryKey:["symbol",e],queryFn:async()=>null,initialData:null,staleTime:1/0}),Xr=e=>{const t=It(),i=e.map(n=>n.replace("USDT","")).join(",");return P.useEffect(()=>{(async()=>{if(e.length===0)return;const s=[],a=await(await fetch(`https://proxy-server-flax-rho.vercel.app/api/proxy?icon=${i}`)).json();s.push(...a);const c=new Map;s.forEach(u=>{c.set(u.symbol,u.image),t.setQueryData(["symbolImage",u.symbol.toLowerCase()],u.image)}),t.setQueryData(["symbolImages"],c)})()},[e,t]),{data:t.getQueryData(["symbolImages"])||new Map}},Ei=P.createContext(null),En=()=>{const e=P.useContext(Ei);if(!e)throw new Error("useCount must be used within a CountProvider");return e},Cn=({children:e})=>{const[t,i]=P.useState("ADAUSDT"),[r,n]=P.useState([]),[s,o]=P.useState(null),[a,c]=P.useState(null),[u,f]=P.useState([]),l=It(),h=P.useRef(!1),m=P.useRef(!1);return Xr(r),P.useEffect(()=>{const w=I=>{const O=I.data;(O==null?void 0:O.type)===_e.BINANCE_SYMBOLS_DATA&&(Object.entries(O.data).forEach(([U,_])=>{l.setQueryData(["symbol",U],_)}),h.current===!1&&Object.keys(O.data).length>0&&(n(Object.keys(O.data)),h.current=!0))},g=I=>{const O=I.data;(O==null?void 0:O.type)===_e.UPBIT_SYMBOL_TRADE_DATA?Object.entries(O.data).forEach(([U,_])=>{l.setQueryData(["symbol",U],_)}):(O==null?void 0:O.type)===_e.UPBIT_SYMBOLS_RESTAPI_TRADE_DATA?Object.entries(O.data).forEach(([U,_])=>{l.setQueryData(["symbol",U],_)}):(O==null?void 0:O.type)===_e.UPBIT_SYMBOL_LIST&&m.current===!1&&(f([...O.data]),m.current=!0)},b=()=>typeof SharedWorker<"u"?new SharedWorker(new URL("/hy_toy/assets/BinanceSharedWorker-DC6GdPTm.js",import.meta.url),{type:"module"}):new Worker(new URL("/hy_toy/assets/BinanceWorker-DsO0NNw8.js",import.meta.url),{type:"module"}),S=()=>typeof SharedWorker<"u"?new SharedWorker(new URL("/hy_toy/assets/UpbitSharedWorker-B-dR6IMn.js",import.meta.url),{type:"module"}):new Worker(new URL("/hy_toy/assets/UpbitWorker-Dd4EVjbn.js",import.meta.url),{type:"module"}),R=b(),E=S();return E&&(Ke(E)?E.port.onmessage=g:E.onmessage=g),R&&(Ke(R)?R.port.onmessage=w:R.onmessage=w),o(R),c(E),()=>{R&&(Ke(R)?R.port.close():R.terminate()),E&&(Ke(E)?E.port.close():E.terminate())}},[]),!s||!a?null:Xt.jsx(Ei,{value:{symbol:t,setSymbol:i,symbolList:r,setSymbolList:n,upbitSymbolList:u,setUpbitSymbolList:f,worker:s,upbitWorker:a},children:e})};export{wn as A,mn as B,bn as C,yn as D,rt as E,Bt as F,nt as G,rn as H,yr as I,nn as J,sn as K,J as L,dn as Q,Mr as R,Ot as S,ln as a,ft as b,kr as c,hn as d,Dr as e,fn as f,pi as g,Nr as h,un as i,dt as j,It as k,on as l,cn as m,Ft as n,mi as o,Tt as p,pn as q,Ze as r,di as s,Cn as t,an as u,En as v,Sn as w,Vr as x,gn as y,vn as z};
